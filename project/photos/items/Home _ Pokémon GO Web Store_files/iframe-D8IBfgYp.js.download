const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./getCashbackInformation-xi97Udc-.js","./runtime-dom.esm-bundler-DKDpRFCQ.js","./openMap-i9NtVYsQ.js","./openMap-BXWVrwAA.css","./request-dBb67d4B.js","./getBalance-CFxoWwJJ.js","./makePayment-Cuan6UUl.js","./index-DXrRck9N.js","./index-DF_tmqjd.css","./index-CIIB9vS1.js","./index.module-CAb5pKs1.js","./index-CT72SR5u.css","./Components-CoDbD7-E.js","./useEventListener-DKMT0oTT.js","./Components-C0-CM_Fn.css","./index-BOh4bGj9.css","./TopupFeeLabel-xLdjAtlt.js","./ThreeDSecureSheet-W3KEicj6.js","./index-4fz5gerO.js","./ThreeDSecureSheet-DJHnsK5i.css","./TopupFeeLabel-r173yTDd.css","./lottie-CVSgdte8.js","./lottie-C1qEp4EH.css","./pinia-1QvHI54K.js","./App-D7GvN3jn.js","./App-B7NaM69a.css","./useCountDown-D-z3gCSd.js","./useHorizontalScrollDirective-RU9gDxrQ.js","./useVerticalScrollDirective-C5oh8oCH.js","./makePayment-DEWaAR1P.css","./topup-CHGtamnV.js","./topup-CQnvZgjB.css","./getPermissionStatus-BBgHfyuC.js","./scanCode-DXbr0gUm.js","./openApp-CgQ7WbyP.js","./openApp-CQFIfQJw.css","./share-aU_Tr_V-.js","./getKycInformation-BuC4kKWT.js","./getUserAddress-D9sEvkeY.js","./inputAddress-TQ_KNonf.js","./getUserLocation-BRArjbew.js","./checkPaymentMethod-KViwoWbz.js","./registerEmail-DxJ7zUSM.js","./registerEmail-BU2cDv02.css","./registerKyc-Dn5-nKZa.js","./startMultiFactorAuth-DI0k_DIN.js","./logout-BtyGzgLQ.js","./verifyMultiFactorAuthResult-CshgeF9v.js","./registerUserInfo-CDonnmwm.js","./registerUserInfo-DBrAATSH.css","./getBankInfo-CUJIpW-A.js","./getBankInfo-CCFRQXeZ.css","./registerPaymentFeatures-Cjx663zy.js","./registerPaymentFeatures-plcy7n0i.css","./addShortcut-Y6MaKw3f.js","./shortcutExists-CjJtrzWw.js","./getUserPaymentFeatureSettings-CTko90o_.js","./smsAuth-BKujR8T4.js","./smsAuth-Ba5EZxzx.css","./initKycPassport-DtraUCY6.js","./initKycPassport-DdAA1zgl.js","./getKycPassportInfo-SWeQv_73.js","./getAllUserAddresses-Bnk9i2o6.js","./getTransactionInfo-BCoGzYDu.js","./getTransactions-D5A8qS6D.js","./getPayPayCardInfo-YMOI_DDo.js","./getExternalLinkageInformation-CPiXTJ_W.js"])))=>i.map(i=>d[i]);
function __vite_legacy_guard(){import.meta.url,import("_").catch((()=>1)),async function*(){}().next()}!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="44922c03-dc5f-4c45-acfa-ed660bc9142d",e._sentryDebugIdIdentifier="sentry-dbid-44922c03-dc5f-4c45-acfa-ed660bc9142d")}catch(n){}}();import{i as isClientAuthorized,P as PPError,M as MiniAppErrorType,g as getAccessToken,r as ref,a as getAppDetail,b as removeAppDetail,s as saveAppDetail,c as getRandomString,d as getClientUUID,G as GA_API_SECRET,e as GA_MEASUREMENT_ID,f as PPFunctionName,h as PPEnv,j as getClientSdkTypeFallback,k as extractOttFromParams,l as removeOttFromClientUrl,m as sha256Hex,n as getCurrentClientId,o as isPayPayMiniApp,p as getEnv,q as getClientVersion,J as JS_SDK_VERSION,t as addBreadcrumbToSentry,u as sendDebugInfoToClient,v as getRefreshToken,w as saveAccessToken,x as saveRefreshToken,y as sendRefreshTokenToClient,z as constructUrl,A as getRuntime,B as getDeviceUUID,C as isBffSitEnvironment,D as saveAuthorizedClientOrigin,E as Bowser,F as reconstructParams,H as getFailErrorCode,I as getPkceCodeChallenge,K as CORE_IFRAME_ORIGIN,L as getCurrentClientOrigin,N as getClientFunctions,O as removeRefreshTokenFromClient,Q as removeLogInData,R as checkJSSDKVersion,S as checkVersion,T as MinJSSDKVersion,U as computed,V as calculateTopMargin,W as linkOpen,X as reactive,Y as saveEnv,Z as saveDebugMode,_ as getConsumedOtt,$ as getCodeVerifier,a0 as saveConsumedOtt,a1 as removeCodeVerifier,a2 as saveUserInfo,a3 as defineComponent,a4 as openBlock,a5 as createElementBlock,a6 as createBaseVNode,a7 as normalizeClass,a8 as createVNode,a9 as onMounted,aa as onUnmounted,ab as withDirectives,ac as vShow,ad as Transition,ae as getPlatformFontSize,af as renderSlot,ag as useCssModule,ah as resolveComponent,ai as withCtx,aj as toDisplayString,ak as createCommentVNode,al as createTextVNode,am as Fragment,an as PPUtilFunctionName,ao as createApp,ap as h,aq as makeDefaultErrorHandler,ar as getTranslationLanguage,as as img_iconError,at as filterErrorButtonList,au as UIComponentsButtonActionType,av as isValidUrl,aw as openWebviewInternal,ax as getButtonType,ay as createBlock,az as normalizeStyle,aA as renderList,aB as img_iconAppUpdate,aC as createWrap,aD as createWrapComplete,aE as ButtonStyle,aF as UIComponentsButtonType,aG as MiniAppRuntime,aH as getValueFromUA,aI as getPayPayLanguage,aJ as getAppVersion,aK as checkMakeIframeVisible,aL as sendMakeIframeVisible,aM as getDeviceUUIDFromNative,aN as isProdEnv,aO as saveTopup,aP as v4,aQ as getPaymentLabelType,aR as updateLocalisedString,aS as getUserInfo,aT as initSentry,aU as WindowBridge,aV as initClientState,aW as isMessageAllowed,aX as PPFunctionResult,aY as shouldRemoveOTTFromQueryParams,aZ as OTT_QUERY_PARAMETERS,a_ as checkIfSdkUpgradeNeededForRemittance,a$ as isValidOrderInfo,b0 as InitStatusCode}from"./runtime-dom.esm-bundler-DKDpRFCQ.js";function loginRequired(e,t,n){if(!isClientAuthorized())throw new PPError('Calling "'.concat(e.data.functionName,'" requires user to be logged in'),MiniAppErrorType.notAuthorized);return n(t)}let fetchAppDetailPromise=null;async function fetchAppDetail(e,t){const n=null!=e?e:getAccessToken();if(!n)throw new Error("Access token is not found");if(fetchAppDetailPromise)return fetchAppDetailPromise;return fetchAppDetailPromise=(async()=>{var e,a,r,o,i,s,l,c,u,d,p,m,_,g,v,f,h,y,P,b,T,E,I,C,A,k,S,w,M;try{const D=await ppFetch({method:"GET",url:"web-api/app/v1/apps/detail",headers:{Authorization:"Bearer ".concat(n)},authorizationRequired:!1,priority:null==t?void 0:t.priority});if("success"!==(null==D?void 0:D.ppFetchResult)||!(null==(a=null==(e=null==D?void 0:D.body)?void 0:e.unsigned)?void 0:a.data))throw removeAppDetail(),new Error("Failed to fetch app detail");const R={appLogo:null==(i=null==(o=null==(r=null==D?void 0:D.body)?void 0:r.unsigned)?void 0:o.data)?void 0:i.appLogo,appName:null==(c=null==(l=null==(s=null==D?void 0:D.body)?void 0:s.unsigned)?void 0:l.data)?void 0:c.appName,englishName:null==(p=null==(d=null==(u=null==D?void 0:D.body)?void 0:u.unsigned)?void 0:d.data)?void 0:p.englishName,openUrl:null==(g=null==(_=null==(m=null==D?void 0:D.body)?void 0:m.unsigned)?void 0:_.data)?void 0:g.openUrl,whiteListDomains:null==(h=null==(f=null==(v=null==D?void 0:D.body)?void 0:v.unsigned)?void 0:f.data)?void 0:h.whiteListDomains,isInternal:null==(b=null==(P=null==(y=null==D?void 0:D.body)?void 0:y.unsigned)?void 0:P.data)?void 0:b.isInternal,window:null==(I=null==(E=null==(T=null==D?void 0:D.body)?void 0:T.unsigned)?void 0:E.data)?void 0:I.window,subdomainCookieSharing:null==(k=null==(A=null==(C=null==D?void 0:D.body)?void 0:C.unsigned)?void 0:A.data)?void 0:k.subdomainCookieSharing,externalUserId:null==(M=null==(w=null==(S=null==D?void 0:D.body)?void 0:S.unsigned)?void 0:w.data)?void 0:M.externalUserId};return saveAppDetail(R),R}catch(D){throw fetchAppDetailPromise=null,D}})(),fetchAppDetailPromise}function useAppDetail(){const e=ref(getAppDetail());return fetchAppDetail().then((t=>{e.value=t})).catch((()=>{})),e}async function getCachedAppDetailOrFetch(){const e=getAppDetail();return e||fetchAppDetail()}var __webpack_require__={d:(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},__webpack_exports__={};__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,k:()=>detectIncognito});var __awaiter=function(e,t,n,a){return new(n||(n=Promise))((function(t,r){function o(e){try{s(a.next(e))}catch(t){r(t)}}function i(e){try{s(a.throw(e))}catch(t){r(t)}}function s(e){var a;e.done?t(e.value):(a=e.value,a instanceof n?a:new n((function(e){e(a)}))).then(o,i)}s((a=a.apply(e,[])).next())}))},__generator=function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,a=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(l){s=[6,l],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function detectIncognito(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,new Promise((function(resolve,reject){var browserName="Unknown";function __callback(e){resolve({isPrivate:e,browserName:browserName})}function identifyChromium(){var e=navigator.userAgent;return e.match(/Chrome/)?void 0!==navigator.brave?"Brave":e.match(/Edg/)?"Edge":e.match(/OPR/)?"Opera":"Chrome":"Chromium"}function assertEvalToString(e){return e===eval.toString().length}function feid(){var toFixedEngineID=0;try{eval("(-1).toFixed(-1);")}catch(e){toFixedEngineID=e.message.length}return toFixedEngineID}function isSafari(){return 44===feid()}function isChrome(){return 51===feid()}function isFirefox(){return 25===feid()}function isMSIE(){return void 0!==navigator.msSaveBlob&&assertEvalToString(39)}function newSafariTest(){var e=String(Math.random());try{window.indexedDB.open(e,1).onupgradeneeded=function(t){var n,a,r=null===(n=t.target)||void 0===n?void 0:n.result;try{r.createObjectStore("test",{autoIncrement:!0}).put(new Blob),__callback(!1)}catch(i){var o=i;return i instanceof Error&&(o=null!==(a=i.message)&&void 0!==a?a:i),"string"!=typeof o?void __callback(!1):void __callback(o.includes("BlobURLs are not yet supported"))}finally{r.close(),window.indexedDB.deleteDatabase(e)}}}catch(t){__callback(!1)}}function oldSafariTest(){var e=window.openDatabase,t=window.localStorage;try{e(null,null,null,null)}catch(n){return void __callback(!0)}try{t.setItem("test","1"),t.removeItem("test")}catch(n){return void __callback(!0)}__callback(!1)}function safariPrivateTest(){void 0!==navigator.maxTouchPoints?newSafariTest():oldSafariTest()}function getQuotaLimit(){var e=window;return void 0!==e.performance&&void 0!==e.performance.memory&&void 0!==e.performance.memory.jsHeapSizeLimit?performance.memory.jsHeapSizeLimit:1073741824}function storageQuotaChromePrivateTest(){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(e,t){__callback(Math.round(t/1048576)<2*Math.round(getQuotaLimit()/1048576))}),(function(e){reject(new Error("detectIncognito somehow failed to query storage quota: "+e.message))}))}function oldChromePrivateTest(){(0,window.webkitRequestFileSystem)(0,1,(function(){__callback(!1)}),(function(){__callback(!0)}))}function chromePrivateTest(){void 0!==self.Promise&&void 0!==self.Promise.allSettled?storageQuotaChromePrivateTest():oldChromePrivateTest()}function firefoxPrivateTest(){__callback(void 0===navigator.serviceWorker)}function msiePrivateTest(){__callback(void 0===window.indexedDB)}function main(){isSafari()?(browserName="Safari",safariPrivateTest()):isChrome()?(browserName=identifyChromium(),chromePrivateTest()):isFirefox()?(browserName="Firefox",firefoxPrivateTest()):isMSIE()?(browserName="Internet Explorer",msiePrivateTest()):reject(new Error("detectIncognito cannot determine the browser"))}main()}))];case 1:return[2,_a.sent()]}}))}))}"undefined"!=typeof window&&(window.detectIncognito=detectIncognito);const __WEBPACK_DEFAULT_EXPORT__=detectIncognito;__webpack_exports__.A;var __webpack_exports__detectIncognito=__webpack_exports__.k;const MAXIMUM_ALLOWED_EVENTS=25;let timeoutId=null,eventsQueue=[];function sendEvents(){var e;const t=eventsQueue;eventsQueue=[],timeoutId=null;const n="https://www.google-analytics.com/mp/collect?api_secret=".concat(GA_API_SECRET,"&measurement_id=").concat(GA_MEASUREMENT_ID),a=JSON.stringify({client_id:getClientUUID(),events:t,user_id:null==(e=getAppDetail())?void 0:e.externalUserId});navigator.sendBeacon?navigator.sendBeacon(n,a):fetch(n,{method:"POST",keepalive:!0,body:a}).catch(console.warn)}function getEventCategory(e){var t;const n=null!=(t=null==e?void 0:e.clientId)?t:getCurrentClientId(),a=(null==e?void 0:e.featureName)?"_".concat(null==e?void 0:e.featureName):"",r=(null==e?void 0:e.sdkType)?e.sdkType:isPayPayMiniApp()?"miniapp":"smartpayment";return"".concat(r,"_").concat(n).concat(a)}const session_id=getRandomString();function logSDKEvent(e,t,{env:n,sendImmediately:a=!1}={}){var r,o;let i=null!=n?n:getEnv();const s=null!=(r=t.event_category)?r:getEventCategory();i||(i=PPEnv.production);const l=getClientVersion(),c={...t,env:i,event_category:s,core_sdk_version:"v".concat(JS_SDK_VERSION),client_sdk_version:"v".concat(l),miniapp_en_name:null==(o=getAppDetail())?void 0:o.englishName,session_id:session_id};if(i!==PPEnv.production?console.log(e,c):addBreadcrumbToSentry({category:"ga_event",data:{eventName:e,...c}}),eventsQueue.push({name:e,params:c,timestamp_micros:Math.floor(1e3*(performance.timeOrigin+performance.now()))}),a||eventsQueue.length===MAXIMUM_ALLOWED_EVENTS)return timeoutId&&clearTimeout(timeoutId),void sendEvents();timeoutId||(timeoutId=setTimeout(sendEvents,1e3))}async function handleLogSDKEvent(e,t,n,a,r={}){var o,i,s,l;let c,u,d;if(e===PPFunctionName.init){const e=a;c=e.clientId,u=null!=(o=e.env)?o:PPEnv.production,"called"===t&&(r={...await getInitCalledExtraParams(e),...r}),d=(null!=(i=null==a?void 0:a.clientSdkType)?i:getClientSdkTypeFallback(c)).toLowerCase()}"called"===t&&[PPFunctionName.makePayment,PPFunctionName.createOrder].includes(e)&&(null==(l=null==(s=null==a?void 0:a.additionalUserInfo)?void 0:s.userAddress)?void 0:l.visible)&&(r={...r,event_label2:"address_visible"}),c=null!=c?c:getCurrentClientId(),logSDKEvent("custom_event",{event_category:"".concat(getEventCategory({clientId:c,featureName:e,sdkType:d})),screen_name:"merchant_web",event_action:"pp_".concat(e,"_").concat(t),error_value:n,...r},{env:u})}async function getInitCalledExtraParams(e){const t=extractOttFromParams(e);let n;try{n=(await __webpack_exports__detectIncognito()).isPrivate?"yes":"no"}catch(a){n="unknown"}return{user_agent:navigator.userAgent,client_url:removeOttFromClientUrl(e.clientUrl),hashed_ott:t?await sha256Hex(t).catch((()=>"")):"",has_rt:e.refreshToken?"yes":"no",has_cv:e.codeVerifier?"yes":"no",incognito:n}}document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&eventsQueue.length>0&&(timeoutId&&clearTimeout(timeoutId),sendEvents())}));const opaUrl=()=>{switch(getEnv()){case PPEnv.staging:return"https://stg.paypay-corp.co.jp/opa-mini-app/";case PPEnv.sandbox:return"https://stg.sandbox.paypay.ne.jp/opa-mini-app/";case PPEnv.test:return"https://localhost/";case PPEnv.canary:return"https://app-prod-canary.paypay.ne.jp/opa-mini-app/";case PPEnv.qa:return"https://qa.stg.paypay.ne.jp/opa-mini-app/";case PPEnv.production:default:return"https://app.paypay.ne.jp/opa-mini-app/"}};function getClientType(){return isPayPayMiniApp()?"MINIAPP":"SMARTPAYMENT"}const createHeaderMiniAppApi=(e,t=!0,n)=>{const a=new Headers({"Content-Type":"application/json","Client-Version":"2.53.0","Client-OS-Type":getRuntime(),...n});if(a.set("Client-UUID",getClientUUID()),a.set("Device-UUID",getDeviceUUID()),a.set("Client-Type",getClientType()),t){const e=getAccessToken();if(!e)return;a.set("Authorization","Bearer ".concat(e))}return"web-api/app/v1/payment/topup"===e&&a.set("X-DEVICE-ID",getDeviceUUID()),isBffSitEnvironment()&&a.set("Is-SIT-Env","true"),a};function ppFetchPrepare(e){e.params||(e.params={}),e.params.payPayLang="ja";const t=constructUrl("".concat(opaUrl()).concat(e.url),e.params),{timeout:n=3e4}=e,a=new AbortController;window.setTimeout((()=>a.abort()),n);const r=createHeaderMiniAppApi(e.url,e.authorizationRequired,e.headers);if(sendDebugInfoToClient({params:[e.method,t,e.data]}),!r)return null;const o={method:e.method,headers:r,signal:null==a?void 0:a.signal};return o.priority=e.priority,["POST","PUT"].includes(e.method)&&e.data&&(o.body=JSON.stringify(e.data)),{requestInfo:t,requestInit:o}}async function ppFetch(e){const t=ppFetchPrepare(e);if(!t){const e="PayPay Mini App JS SDK is not authorized";return console.info(e),Promise.resolve({ppFetchResult:"notAuthorized",errorCode:MiniAppErrorType.notAuthorized,body:null})}const{requestInfo:n,requestInit:a}=t;try{const t=await fetch(n,a),r=await t.json();sendDebugInfoToClient({params:[t.status.toString(),r]});if("invalid_token"===(null==r?void 0:r.error)){const n=getRefreshToken();return!e.suppressRefresh&&n&&await fetchRefreshToken(n)?ppFetch({...e,suppressRefresh:!0}):{ppFetchResult:"tokenExpired",errorCode:MiniAppErrorType.tokenExpired,statusCode:t.status,body:null}}return parseResponse(e,t,r)}catch(r){if((r instanceof Error||r instanceof DOMException)&&"AbortError"===r.name)return{ppFetchResult:"timeout",errorCode:MiniAppErrorType.timeOut,body:null};return r instanceof TypeError&&("Failed to fetch"===r.message||"Load failed"===r.message)||console.warn(r),{ppFetchResult:"fetchError",errorCode:MiniAppErrorType.serverError,body:null}}}const ERROR_CODES_MAP={UNAUTHORIZED:MiniAppErrorType.notAuthorized,BAD_REQUEST:MiniAppErrorType.badRequest,MISSING_REQUEST_PARAMS:MiniAppErrorType.badRequestInsufficientParameter,OP_OUT_OF_SCOPE:MiniAppErrorType.insufficientScope,MINI_APP_SCOPE_NOT_FOUND:MiniAppErrorType.insufficientScope};function shouldReportError(e){if(!(null==e?void 0:e.code))return!0;if(e.code in ERROR_CODES_MAP)return!1;const t={NO_SUFFICIENT_FUND:{},OTP_BAD_REQUEST:{codeId:["01811004","01810002"]},AUTO_TOPUP_FAILED:{},UNACCEPTABLE_OP:{codeId:["00400034"]},PPC_BAD_REQUEST:{},LIMIT_EXCEEDED:{},CHARGE_ERROR:{},ACQUIRING_MAX_TRANSACTION_AMOUNT:{},INTERNAL_AUTH_INVALID_REFRESH_TOKEN_ERROR:{},INVALID_TOKEN_CLIENT_OR_SECRET:{}}[e.code];if(t){if(null==t.codeId)return!1;if(e.codeId&&t.codeId.includes(e.codeId))return!1}return!0}function parseResponse(e,t,n){var a,r,o;if(e.skipResultCodeCheck&&(e.skipStatusCodeCheck||t.status>=200&&t.status<300))return{ppFetchResult:"success",statusCode:t.status,body:n};const i=n,s=i.unsigned?i.unsigned.resultInfo:i.resultInfo;return 429===t.status?{ppFetchResult:"rateLimitExceeded",errorCode:MiniAppErrorType.rateLimitExceeded,statusCode:t.status,body:i}:"SUCCESS"!==(null==s?void 0:s.code)?(addBreadcrumbToSentry({category:"network",message:"An error occurred while making a network request",data:{method:e.method,url:e.url,errorCode:null==s?void 0:s.code,errorMessage:null==s?void 0:s.message}}),shouldReportError(s)&&(console.warn("An unknown network error occurred errorCode: ".concat(null==s?void 0:s.code," url: ").concat(e.url)),logSDKEvent("custom_event",{event_category:getEventCategory(),event_action:"api_error",event_label:null==s?void 0:s.code,screen_name:"merchant_web"})),{ppFetchResult:"apiError",errorCode:ERROR_CODES_MAP[null==s?void 0:s.code]||MiniAppErrorType.serverError,statusCode:t.status,body:i}):(null==(o=null==(r=null==(a=i.unsigned)?void 0:a.data)?void 0:r.header)?void 0:o.resultCode)&&"S0000"!==i.unsigned.data.header.resultCode?{ppFetchResult:"apiError",errorCode:MiniAppErrorType.serverError,statusCode:t.status,body:i}:{ppFetchResult:"success",statusCode:t.status,body:n}}async function fetchRefreshToken(e,t){const n=getCurrentClientId(),a=await ppFetch({method:"POST",url:"web-api/app/token/v1/refresh",data:{refreshToken:e,opaClientId:n},suppressRefresh:!0,authorizationRequired:!1});if("success"===a.ppFetchResult){const e=a.body.data;if((null==e?void 0:e.accessToken)&&e.refreshToken){saveAccessToken(e.accessToken),saveRefreshToken(e.refreshToken),t&&saveAuthorizedClientOrigin(n,t);try{const t=await fetchAppDetail(e.accessToken);sendRefreshTokenToClient(e.refreshToken,null==t?void 0:t.subdomainCookieSharing)}catch(r){sendRefreshTokenToClient(e.refreshToken,!1)}return!0}}return!1}const CLAIM_COUPON_URL="web-api/app/v1/coupons/claim";async function claimCoupon({merchantId:e,couponId:t}){const n=await ppFetch({method:"POST",url:CLAIM_COUPON_URL,data:{merchantId:e,couponId:t}});if("success"!==n.ppFetchResult)throw new PPError("An error occurred when trying to claim the coupon status=".concat(n.errorCode),n.errorCode);return!0}function getCurrentBrowser(){switch(Bowser.getParser(navigator.userAgent).getBrowserName()){case"Microsoft Edge":return"edge";case"Chrome":return"chrome";case"Safari":return"safari";case"Firefox":return"firefox"}}var MiniAppStatusType=(e=>(e.validToken="TOKEN_VALID",e.initialized="INITIALIZED",e.emailRegistered="EMAIL_REGISTERED",e.emailNotVerified="EMAIL_NOT_VERIFIED",e.success="SUCCESS",e.loggedOut="LOGGED_OUT",e.connected="CONNECTED",e))(MiniAppStatusType||{});async function getAuthStatus(e){const t=reconstructParams(e);await execute$5(t)}async function handleFailCallback(e,t){var n;let a=null;return(null==e?void 0:e.isInternal)||(a=await getPkceCodeChallenge()),null==(n=null==e?void 0:e.fail)?void 0:n.call(e,{errorCode:t,code:a})}async function execute$5(e){var t,n,a,r,o,i,s,l,c;try{if(!isClientAuthorized())return handleFailCallback(e,MiniAppErrorType.notAuthorized);const u=await ppFetch({method:"GET",url:"/web-api/app/v1/smartpayment/auth/status",params:{}});if("success"!==u.ppFetchResult)return"INVALID_USER_AUTHORIZATION_ID"===(null==(a=null==(n=null==(t=u.body)?void 0:t.unsigned)?void 0:n.resultInfo)?void 0:a.code)?handleFailCallback(e,MiniAppErrorType.notAuthorized):handleFailCallback(e,getFailErrorCode(u.ppFetchResult));if((null==(i=null==(o=null==(r=null==u?void 0:u.body)?void 0:r.unsigned)?void 0:o.resultInfo)?void 0:i.code)===MiniAppStatusType.success){const t=null==(l=null==(s=null==u?void 0:u.body)?void 0:s.unsigned)?void 0:l.data;if(!(null==t?void 0:t.isActive))return handleFailCallback(e,MiniAppErrorType.notAuthorized);if(null==t?void 0:t.showPermission)return handleFailCallback(e,MiniAppErrorType.permissionRequired);if((null==t?void 0:t.isActive)&&!(null==t?void 0:t.showPermission))return null==(c=null==e?void 0:e.success)?void 0:c.call(e,{statusCode:MiniAppStatusType.connected})}}catch(u){return handleFailCallback(e,(null==u?void 0:u.message)||MiniAppErrorType.serverError)}}function initRequired(e,t,n){if(!getCurrentClientId()||![CORE_IFRAME_ORIGIN,getCurrentClientOrigin()].includes(e.origin))throw new PPError('PayPay SDK is not initialized, please call "pp.init" before calling "'.concat(e.data.functionName,'"'),MiniAppErrorType.sdkNotInitialized);return n(t)}const getLoginUrlEndpoint="public/auth/v1/loginUrl";async function getLoginUrl(e){var t;const n=null!=(t=e.redirectUrl)?t:await getClientFunctions().getUrl(),{loginUrl:a,loginUrlValidTill:r}=await getLoginUrlWithPkce({postLoginRedirectUrl:n,postLoginRedirectType:e.redirectType});return{url:a,loginUrlValidTill:r}}async function getLoginUrlInternal({pkceCodeChallenge:e,postLoginRedirectUrl:t,postLoginRedirectType:n,scopes:a}){var r;const o=getCurrentClientId();if(!o)throw new PPError('PayPay SDK is not initialized, please call "pp.init" before calling this function',MiniAppErrorType.sdkNotInitialized);const i=n||"WEB_LINK",s=null!=(r=getCurrentBrowser())?r:"WEB",l=await ppFetch({method:"POST",url:getLoginUrlEndpoint,data:{clientId:o,code:e,scopes:a,redirectUrl:t,nonce:getRandomString(),userAgent:s,redirectType:i},authorizationRequired:!1});if("success"!==l.ppFetchResult)throw new PPError("An error occurred when trying to fetch Login URL status=".concat(l.errorCode),l.errorCode);const{loginUrl:c,responseValidTill:u}=l.body.data;return{loginUrl:c,loginUrlValidTill:u}}async function getLoginUrlWithPkce(e){return getLoginUrlInternal({...e,pkceCodeChallenge:await getPkceCodeChallenge()})}async function getLoginUrlIfUserNotSignedIn(e){const t=await new Promise((e=>{getAuthStatus({fail:({code:t})=>e(t),success:()=>e(null)})})).catch((()=>null));if(t)return getLoginUrlInternal({...e,pkceCodeChallenge:t})}getLoginUrl.middlewares=[initRequired];const FETCH_COUPONS_URL="public/coupons/v1/coupons";async function fetchCoupons({merchantId:e,couponId:t,...n}){var a;const r=getCurrentClientId(),{loginUrl:o,loginUrlValidTill:i}=null!=(a=await getLoginUrlIfUserNotSignedIn(n))?a:{loginUrl:void 0,loginUrlValidTill:0},s=1e3*(i-60),l=await ppFetch({method:"GET",url:FETCH_COUPONS_URL,params:{clientId:r,merchantId:e,couponIds:t},authorizationRequired:!o});if("success"!==l.ppFetchResult)throw new PPError("An error occurred when trying to fetch the coupons status=".concat(l.errorCode),l.errorCode);const c=l.body.data.coupons;if(0===c.length)throw new PPError("No coupon found for merchantId=".concat(e," and couponId=").concat(t),MiniAppErrorType.notAvailable);const u=c[0],d=(new Date).getTime();if(new Date(u.liveEndDate).getTime()<d)throw new PPError("Coupon has expired",MiniAppErrorType.invalidData);if("SCHEDULED"!==u.status)throw new PPError("Coupon status is ".concat(u.status," that is not valid"),MiniAppErrorType.invalidData);return c.map((e=>({...e,loginUrl:o,loginUrlExpiresAt:s})))}fetchCoupons.middlewares=[initRequired];const GET_PAYMENT_SETTINGS_URL="web-api/app/v1/paymentSettings";async function getPaymentSettings(){const e=await ppFetch({method:"GET",url:GET_PAYMENT_SETTINGS_URL});if("success"!==e.ppFetchResult)throw new PPError("An error occurred when trying to fetch the payment settings status=".concat(e.errorCode),e.errorCode);return e.body.unsigned.data}function logEvent({eventName:e="custom_event",sendImmediately:t,clientId:n,event_category:a,event_category_suffix:r,screen_name:o="merchant_web",...i}){return n=null!=n?n:getCurrentClientId(),logSDKEvent(e,{...i,event_category:a=null!=a?a:getEventCategory({clientId:n,featureName:r}),screen_name:o},{sendImmediately:t})}function logout$1(){var e;const t=Boolean(null==(e=getAppDetail())?void 0:e.subdomainCookieSharing);return removeRefreshTokenFromClient(t),removeLogInData(),t}logEvent.middlewares=[];const MinVersion={PERFORMANCE_MEASUREMENT:"4.47.0",START_MULTIFACTOR_AUTH_PIN_FALLBACK:"4.63.0"};function markAsReady(){checkJSSDKVersion(MinJSSDKVersion.HANDLE_MARK_AS_READY_CORE)&&checkVersion(MinVersion.PERFORMANCE_MEASUREMENT)&&(window.location.href="paypay://miniappPerformance/ready")}markAsReady.middlewares=[];const coreFunctions={claimCoupon:claimCoupon,fetchCoupons:fetchCoupons,getLoginUrl:getLoginUrl,getPaymentSettings:getPaymentSettings,logEvent:logEvent,logout:logout$1,markAsReady:markAsReady};Object.values(coreFunctions).forEach((e=>{e.middlewares||(e.middlewares=[initRequired,loginRequired])}));const scriptRel="modulepreload",assetsURL=function(e,t){return new URL(e,t).href},seen={},__vitePreload=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),o=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));a=Promise.allSettled(t.map((t=>{if((t=assetsURL(t,n))in seen)return;seen[t]=!0;const a=t.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(!!n)for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.href===t&&(!a||"stylesheet"===r.rel))return}else if(document.querySelector('link[href="'.concat(t,'"]').concat(r)))return;const i=document.createElement("link");return i.rel=a?"stylesheet":scriptRel,a||(i.as="script"),i.crossOrigin="",i.href=t,o&&i.setAttribute("nonce",o),document.head.appendChild(i),a?new Promise(((e,n)=>{i.addEventListener("load",e),i.addEventListener("error",(()=>n(new Error("Unable to preload CSS for ".concat(t)))))})):void 0})))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then((t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)}))};function useGetHeights(){const e=navigator.userAgent,t={statusBarHeight:0,navBarHeight:0,bottomHeight:0,isNative:!1};return e.split(" ").forEach((e=>{if(/Offset.*/.test(e)){const n=null==e?void 0:e.split("/")[1],a=null==n?void 0:n.split(";");if(t.isNative=!0,3!==a.length)return;t.statusBarHeight=parseInt(a[0],10),t.navBarHeight=parseInt(a[1],10),t.bottomHeight=parseInt(a[2],10)}})),t}function useGetHeightProperties(){const{navBarHeight:e,statusBarHeight:t,bottomHeight:n,isNative:a}=useGetHeights(),r=useAppDetail(),o=computed((()=>{var e,t,n;return null!=(n=null==(t=null==(e=r.value)?void 0:e.window)?void 0:t.navigationStyle)?n:"none"})),i=computed((()=>"default"===o.value)),s=computed((()=>"none"===o.value)),l=computed((()=>"custom"===o.value)),c=computed((()=>"".concat(n,"px"))),u=computed((()=>calculateTopMargin(o.value,t,e)));return{innerHeightProperty:computed((()=>{switch(o.value){case"custom":case"none":return"calc(100vh - ".concat(n,"px - ").concat(u.value,"px)");default:return"calc(100vh - ".concat(n,"px)")}})),bottomHeightProperty:c,fullFillHeightProperty:computed((()=>"custom"===o.value?"calc(100vh - ".concat(n,"px - ").concat(u.value,"px)"):"calc(100vh - ".concat(n,"px)"))),headerHeight:u,navBarHeight:e,statusBarHeight:t,bottomHeight:n,isNone:s,isCustom:l,isDefault:i,isNative:a}}async function getTopBarHeight(e){const t=reconstructParams(e),n=await getCachedAppDetailOrFetch().then((e=>{var t;return null!=(t=e.window.navigationStyle)?t:"none"})).catch((()=>"none")),{statusBarHeight:a,navBarHeight:r}=useGetHeights();t.success({height:calculateTopMargin(n,a,r)})}function closeApp(e){var t,n,a,r,o;let i=null;if(e&&(i=reconstructParams(e)),isPayPayMiniApp()){let e=(null==(t=null==i?void 0:i.options)?void 0:t.deeplink)||"paypay://closeMiniApp";if(!e.startsWith("paypay://"))return null==(n=null==i?void 0:i.fail)?void 0:n.call(i,{errorCode:MiniAppErrorType.deeplinkUnavailable});const o=null==(a=null==i?void 0:i.options)?void 0:a.closeConfirmation;if(!0===o||!1===o){const t=e.includes("?")?"&":"?";e+="".concat(t,"ppShowCloseConfirmation=").concat(o)}linkOpen(e),null==(r=null==i?void 0:i.success)||r.call(i)}else null==(o=null==i?void 0:i.fail)||o.call(i,{errorCode:MiniAppErrorType.deeplinkUnavailable})}function getUAID(e){execute$4(reconstructParams(e)).catch((()=>{}))}async function execute$4(e){var t,n,a,r,o;const i=await ppFetch({method:"GET",url:"web-api/app/v1/users/id"});if("success"!==i.ppFetchResult)return null==(t=null==e?void 0:e.fail)?void 0:t.call(e,{errorCode:getFailErrorCode(i.ppFetchResult)});const s=null==(a=null==(n=null==i?void 0:i.body)?void 0:n.signed)?void 0:a.jws;(null==s?void 0:s.length)?null==(r=null==e?void 0:e.success)||r.call(e,{jws:s}):null==(o=null==e?void 0:e.fail)||o.call(e,{errorCode:MiniAppErrorType.serverError})}function getConfigUrl(){switch(getEnv()){case PPEnv.staging:return"https://static.paypay-corp.co.jp/config/globalServiceStatus.json";case PPEnv.sandbox:return"https://static.paypay-corp.co.jp/config/globalServiceStatus_sandbox.json";case PPEnv.test:return"https://s3-ap-northeast-1.amazonaws.com/app-resources-dev/config/globalServiceStatus.json";case PPEnv.canary:return"https://static.paypay-corp.co.jp/config/globalServiceStatus_prodCanary.json";case PPEnv.qa:return"https://static.paypay-corp.co.jp/config/globalServiceStatus_qa.json";case PPEnv.production:default:return"https://static.paypay.ne.jp/config/globalServiceStatus.json"}}let appConfig=null;async function initAppConfiguration(){const e=await fetch(getConfigUrl(),{method:"GET",headers:{Accept:"application/json"}}).then((e=>e.json())).catch((()=>{}));if(!e||"error"in e)return!1;const t=e.variables;return appConfig={topupButtonsAmount:null==t?void 0:t.topupButtonsAmount,topupHalfSheetAmount:null==t?void 0:t.topupHalfSheetAmount,autoChargeTopupHalfSheetAmount:null==t?void 0:t.autoChargeTopupHalfSheetAmount,autoChargeRecommendedTopupAmount:null==t?void 0:t.autoChargeRecommendedTopupAmount,topupMinAmount:null==t?void 0:t.topupMinAmount},!0}async function getAppConfig(){return appConfig||(await initAppConfiguration(),appConfig)}const OTTLoginState=reactive({isJustLoggedIn:!1,setLoginState(e){this.isJustLoggedIn=e}});async function getUserProfile(e){const t=reconstructParams(e);await execute$3(t)}async function execute$3(e){var t,n;const a=await ppFetch({method:"GET",url:"web-api/app/v2/users/profile"});if("success"!==a.ppFetchResult)return null==(t=null==e?void 0:e.fail)?void 0:t.call(e,{errorCode:getFailErrorCode(a.ppFetchResult)});const r={...a.body.unsigned.data,jws:a.body.signed.jws};null==(n=null==e?void 0:e.success)||n.call(e,r)}let initDonePromise=Promise.resolve(!0);async function init$1(e){const t=initDonePromise;let n;initDonePromise=new Promise((e=>n=e)),await t;const a=reconstructParams({...e,success:t=>{var n;openPerformanceDeepLink("paypay://miniappPerformance/init/success"),null==(n=e.success)||n.call(e,t)},fail:t=>{var n;openPerformanceDeepLink("paypay://miniappPerformance/init/fail"),null==(n=e.fail)||n.call(e,t)},complete:()=>{var t;n(!0),null==(t=e.complete)||t.call(e)}});await execute$2(a,getCurrentClientOrigin())}function prefetchAppConfiguration(){setTimeout((()=>{initAppConfiguration()}),100)}async function verifySavedTokens(){return new Promise((e=>{getUAID({success:()=>e(!0),fail:()=>e(!1)})}))}async function verifyRefreshToken(e,t){if(!(await fetchRefreshToken(e,t)))return!1;return!!getAccessToken()&&(saveUserData(),prefetchAppConfiguration(),!0)}async function exchangeOtt(e,t,n,a){var r,o,i,s;try{const l=await ppFetch({method:"POST",url:"web-api/app/token/v1/issue",data:{ott:e,opaClientId:t,codeVerifier:a||getCodeVerifier()},authorizationRequired:!1});if("success"!==(null==l?void 0:l.ppFetchResult))return{success:!1,errorCode:getFailErrorCode(null==l?void 0:l.ppFetchResult)};if("SUCCESS"===(null==(o=null==(r=null==l?void 0:l.body)?void 0:r.resultInfo)?void 0:o.code)&&(null==(i=l.body.data)?void 0:i.accessToken)&&(null==(s=l.body.data)?void 0:s.refreshToken))return saveConsumedOtt(e),saveAccessToken(l.body.data.accessToken),saveRefreshToken(l.body.data.refreshToken),saveAuthorizedClientOrigin(t,n),removeCodeVerifier(),{success:!0}}catch(l){}return{success:!1,errorCode:MiniAppErrorType.serverError}}async function execute$2(e,t){var n,a,r,o,i,s,l;try{let l=!1,c=!1;saveEnv(null==e?void 0:e.env),saveDebugMode(null!=(n=null==e?void 0:e.debugMode)&&n);const u=extractOttFromParams(e),d=getConsumedOtt();if(u&&u!==d){const n=e.codeVerifier;if((await exchangeOtt(u,e.clientId,t,n)).success)return afterOttSuccess(),void(null==(a=e.success)||a.call(e,{statusCode:MiniAppStatusType.initialized}));l=!0}if(getAccessToken()){if(await verifySavedTokens())return void(null==(r=e.success)||r.call(e,{statusCode:MiniAppStatusType.validToken}));c=!0}if(e.refreshToken){if(await verifyRefreshToken(e.refreshToken,t))return void(null==(o=e.success)||o.call(e,{statusCode:MiniAppStatusType.validToken}));c=!0}if(c)return void(null==(i=e.fail)||i.call(e,{errorCode:MiniAppErrorType.tokenExpired}));null==(s=e.fail)||s.call(e,{errorCode:l?MiniAppErrorType.serverError:MiniAppErrorType.sdkNotInitialized})}catch(c){null==(l=e.fail)||l.call(e,{errorCode:MiniAppErrorType.serverError})}}function afterOttSuccess(){const e=getAccessToken(),t=getRefreshToken();if(!e||!t)return void console.warn("unexpected state: accessToken or refreshToken is not found");const n=(a=!0)=>{fetchAppDetail(e,{priority:"low"}).then((e=>{sendRefreshTokenToClient(t,e.subdomainCookieSharing),saveUserData(),prefetchAppConfiguration()})).catch((e=>{const t=e instanceof Error?e.message:"Unknown error";addBreadcrumbToSentry({type:"init",message:"Failed to fetch app detail: "+t}),a&&n(!1)}))};n(),OTTLoginState.setLoginState(!0),setTimeout((()=>{OTTLoginState.setLoginState(!1)}),5e3)}function saveUserData(){isPayPayMiniApp()||getUserProfile({success:e=>{saveUserInfo(JSON.stringify({avatarUrl:null==e?void 0:e.avatarUrl,nickName:null==e?void 0:e.nickName}))}}).catch((()=>{}))}function openPerformanceDeepLink(e){checkVersion(MinVersion.PERFORMANCE_MEASUREMENT)&&(window.location.href=e)}const _sfc_main$4=defineComponent({name:"LoadingIndicator"}),loading="_loading_ovc6l_1",bounce="_bounce_ovc6l_14",bounce1="_bounce1_ovc6l_14",bounce2="_bounce2_ovc6l_17",style0$3={loading:loading,bounce:bounce,bounce1:bounce1,bounce2:bounce2},_export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n};function _sfc_render$4(e,t,n,a,r,o){return openBlock(),createElementBlock("div",{class:normalizeClass(e.$style.loading)},[createBaseVNode("div",{class:normalizeClass(e.$style.bounce1)},null,2),createBaseVNode("div",{class:normalizeClass(e.$style.bounce2)},null,2),t[0]||(t[0]=createBaseVNode("div",null,null,-1))],2)}const cssModules$3={$style:style0$3},LoadingIndicator=_export_sfc(_sfc_main$4,[["render",_sfc_render$4],["__cssModules",cssModules$3]]),buttonWrapper="_buttonWrapper_11lyn_2",container$1="_container_11lyn_2",primary="_primary_11lyn_32",focus="_focus_11lyn_43",disabled="_disabled_11lyn_49",success="_success_11lyn_54",warning="_warning_11lyn_76",danger="_danger_11lyn_98",link="_link_11lyn_120",outLined="_outLined_11lyn_145",noMargin$1="_noMargin_11lyn_200",large$1="_large_11lyn_203",normal="_normal_11lyn_216",small="_small_11lyn_229",block="_block_11lyn_242",styles$3={"ppmna-default-font":"_ppmna-default-font_11lyn_1",buttonWrapper:buttonWrapper,container:container$1,primary:primary,focus:focus,disabled:disabled,success:success,warning:warning,danger:danger,link:link,outLined:outLined,default:"_default_11lyn_167",noMargin:noMargin$1,large:large$1,normal:normal,small:small,block:block},PButton=defineComponent({name:"PpmnaButton",props:{disabled:Boolean,loading:Boolean,block:Boolean,type:{type:String,default:"default"},size:{type:String,default:"normal"},tabIndex:{type:Number,required:!1,default:0},name:{type:String,required:!1,default:""},disabledClassName:{type:String,required:!1,default:""},class:{type:[String,Object],required:!1,default:""},noMargin:{type:Boolean,default:!1}},emits:{click:()=>!0},setup:(e,{emit:t})=>({onClick:()=>{e.loading||e.disabled||t("click")}}),render(){var e,t;return createVNode("button",{class:[styles$3.buttonWrapper,styles$3.container,styles$3[this.type],styles$3[this.size],{[styles$3.block]:this.block,[styles$3.disabled]:this.disabled,[styles$3.noMargin]:this.noMargin},this.disabled&&this.disabledClassName,this.class],name:this.name,tabindex:this.tabIndex,disabled:this.disabled,onClick:this.onClick},[this.loading?createVNode(LoadingIndicator,null,null):null==(t=(e=this.$slots).default)?void 0:t.call(e)])}}),dividerWrapper="_dividerWrapper_1qtkg_1",divider="_divider_1qtkg_1",large="_large_1qtkg_22",noMargin="_noMargin_1qtkg_26",styles$2={dividerWrapper:dividerWrapper,divider:divider,large:large,noMargin:noMargin},Divider=defineComponent({props:{size:{type:String,default:"normal"},noMargin:{type:Boolean,default:!1}},setup(e){const t=[styles$2.dividerWrapper,styles$2.divider,{[styles$2.large]:"large"===e.size,[styles$2.noMargin]:e.noMargin}];return()=>createVNode("div",{class:t,role:"separator"},null)}}),overlayWrapper="_overlayWrapper_1t0ap_17",overlay="_overlay_1t0ap_17",enterActive="_enterActive_1t0ap_30",leaveActive="_leaveActive_1t0ap_33",styles$1={overlayWrapper:overlayWrapper,overlay:overlay,enterActive:enterActive,"pp-fade-in":"_pp-fade-in_1t0ap_1",leaveActive:leaveActive,"pp-fade-out":"_pp-fade-out_1t0ap_1"},OverLay=defineComponent({props:{show:Boolean,appear:{type:Boolean,default:!0},click:{type:Function,default:()=>()=>{}},onTouchstart:{type:Function,default:()=>{}},dontPreventSwipe:{type:Boolean,default:!1,required:!1}},setup(e,{slots:t,emit:n}){const a=ref("");return onMounted((()=>{const e=document.documentElement.getAttribute("style")||"";/.*overflow:hidden;.*/.test(e)||(a.value=e,document.documentElement.setAttribute("style","".concat(a.value,";overflow:hidden; overscroll-behavior-y: none;")))})),onUnmounted((()=>{document.documentElement.setAttribute("style",a.value)})),{slots:t,emit:n,preventSwipe:t=>{e.dontPreventSwipe||(t.preventDefault(),t.stopPropagation())}}},render(){return createVNode(Transition,{appear:this.appear,"enter-active-class":styles$1.enterActive,"leave-active-class":styles$1.leaveActive},{default:()=>{var e,t;return[withDirectives(createVNode("div",{class:[styles$1.overlayWrapper,styles$1.overlay],onClick:()=>this.click(),onTouchmove:this.preventSwipe,"data-testid":"ppmna-overlay"},[null==(t=(e=this.slots).default)?void 0:t.call(e)]),[[vShow,this.show]])]}})}}),_sfc_main$3=defineComponent({name:"FontSizeProvider",setup(){let e;switch(getPlatformFontSize()){case"LARGE":e="ppmna-font-size-large";break;case"EXTRA_LARGE":e="ppmna-font-size-extra-large";break;default:e="ppmna-font-size-regular"}return{fontSizeClass:e}}});function _sfc_render$3(e,t,n,a,r,o){return openBlock(),createElementBlock("div",{class:normalizeClass(e.fontSizeClass)},[renderSlot(e.$slots,"default")],2)}const FontSizeProvider=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),_sfc_main$2=defineComponent({components:{PButton:PButton,Divider:Divider,OverLay:OverLay,FontSizeProvider:FontSizeProvider},props:{show:Boolean,title:{type:String,default:""},text:{type:String,default:""},buttonTitle:{type:String,default:"Ok"}},emits:{"close-click":()=>!0},setup:(e,{emit:t})=>({onClick:()=>t("close-click"),style:useCssModule()})}),container="_container_1ybuo_1",contentContainer="_contentContainer_1ybuo_14",InAnimation="_InAnimation_1ybuo_1",border="_border_1ybuo_35",buttonTitle="_buttonTitle_1ybuo_38",unitTitle="_unitTitle_1ybuo_69",unitSubTitle="_unitSubTitle_1ybuo_83",unitAlertContent="_unitAlertContent_1ybuo_97",style0$2={container:container,contentContainer:contentContainer,InAnimation:InAnimation,border:border,buttonTitle:buttonTitle,"fade-leave-active":"_fade-leave-active_1ybuo_52","fade-leave-to":"_fade-leave-to_1ybuo_55","fade-leave":"_fade-leave_1ybuo_52",unitTitle:unitTitle,unitSubTitle:unitSubTitle,unitAlertContent:unitAlertContent};function _sfc_render$2(e,t,n,a,r,o){const i=resolveComponent("OverLay"),s=resolveComponent("Divider"),l=resolveComponent("PButton"),c=resolveComponent("FontSizeProvider");return openBlock(),createElementBlock(Fragment,null,[createVNode(i,{show:e.show},null,8,["show"]),createVNode(Transition,{name:e.style.fade},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[e.show?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.style.container)},[createBaseVNode("div",{class:normalizeClass(e.style.contentContainer)},[createBaseVNode("div",{class:normalizeClass([e.style.unitAlertContent])},[e.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([e.style.unitTitle])},toDisplayString(e.title),3)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass([e.style.unitSubTitle])},toDisplayString(e.text),3)],2),createVNode(s,{"no-margin":"",class:normalizeClass(e.style.border)},null,8,["class"]),createVNode(l,{size:"small",type:"link",block:"",class:normalizeClass(e.style.buttonTitle),onClick:e.onClick},{default:withCtx((()=>[createTextVNode(toDisplayString(e.buttonTitle),1)])),_:1},8,["class","onClick"])],2)],2)):createCommentVNode("",!0)])),_:1})])),_:1},8,["name"])],64)}const cssModules$2={$style:style0$2},AppVue$1=_export_sfc(_sfc_main$2,[["render",_sfc_render$2],["__cssModules",cssModules$2]]);function usePopStateHandler(e,t){const n=n=>{var a;n.data.name===PPUtilFunctionName.clientPopState&&(e(),null==(a=null==t?void 0:t.fail)||a.call(t,{errorCode:MiniAppErrorType.userCanceled}))};onMounted((()=>{window.addEventListener("message",n)})),onUnmounted((()=>{window.removeEventListener("message",n)}))}const initAlertSheet=e=>{const t=ref(!0),n=reactive(e),a=()=>{var e;t.value=!1,null==(e=null==n?void 0:n.success)||e.call(n),setTimeout((()=>{document.body.removeChild(o),r.unmount()}),300)},r=createApp({setup:()=>(usePopStateHandler(a,e),()=>h(AppVue$1,{show:t.value,title:null==n?void 0:n.title,text:null==n?void 0:n.text,buttonTitle:null==n?void 0:n.buttonTitle,onCloseClick:()=>{a()}}))}),o=document.createElement("div");o.className="ppmna-reset-css",r.config.errorHandler=makeDefaultErrorHandler(r,e),r.mount(o),document.body.appendChild(o)};function showAlert(e){var t;const n=reconstructParams(e);try{initAlertSheet(n)}catch(a){null==(t=null==n?void 0:n.fail)||t.call(n,{errorCode:MiniAppErrorType.unknown})}}const actionSheetWrapper="_actionSheetWrapper_15b6f_23",actionSheetParent="_actionSheetParent_15b6f_23",round="_round_15b6f_59",moving="_moving_15b6f_63",disableScroll="_disableScroll_15b6f_66",fullscreen="_fullscreen_15b6f_69",alert="_alert_15b6f_73",responsive="_responsive_15b6f_86",actionSheetContainer="_actionSheetContainer_15b6f_90",enterActivePrimary="_enterActivePrimary_15b6f_93",enterActiveSecondary="_enterActiveSecondary_15b6f_94",leaveActivePrimary="_leaveActivePrimary_15b6f_97",leaveActiveSecondary="_leaveActiveSecondary_15b6f_98",enterFromPrimary="_enterFromPrimary_15b6f_102",enterFromSecondary="_enterFromSecondary_15b6f_113",enterActiveAlert="_enterActiveAlert_15b6f_118",leaveActiveAlert="_leaveActiveAlert_15b6f_128",enterFromAlert="_enterFromAlert_15b6f_138",styles={"ppmna-default-font":"_ppmna-default-font_15b6f_1",actionSheetWrapper:actionSheetWrapper,actionSheetParent:actionSheetParent,round:round,moving:moving,disableScroll:disableScroll,fullscreen:fullscreen,alert:alert,responsive:responsive,actionSheetContainer:actionSheetContainer,enterActivePrimary:enterActivePrimary,enterActiveSecondary:enterActiveSecondary,leaveActivePrimary:leaveActivePrimary,leaveActiveSecondary:leaveActiveSecondary,enterFromPrimary:enterFromPrimary,enterFromSecondary:enterFromSecondary,enterActiveAlert:enterActiveAlert,"pp-fade-in":"_pp-fade-in_15b6f_1",leaveActiveAlert:leaveActiveAlert,"pp-fade-out":"_pp-fade-out_15b6f_1",enterFromAlert:enterFromAlert},ActionSheet=defineComponent({props:{show:Boolean,class:{type:[String,Object],default:""},appear:{type:Boolean,default:!0},round:{type:Boolean,default:!0},type:{type:String,default:"primary"},fullScreen:{type:Boolean,default:!1},forbiddenSwipe:{type:Boolean,default:!1},style:{type:Object,default:()=>({}),required:!1},noPaddingBottom:{type:Boolean,default:!1,required:!1},noOverlay:{type:Boolean,default:!1,required:!1},containerClass:{type:String,default:""},topSpacerStyle:{type:Object,required:!1,default:null}},emits:{close:()=>!0,afterLeave:()=>!0,transitionEnd:()=>!0},setup(e,{slots:t,emit:n}){const a=reactive({y:0,initial:0,attribute:"",isTouchMoving:!1,isSheetMoving:!1,contentsInitialScrollTop:0}),r=e=>{if(e instanceof HTMLElement){const t=e.closest(".".concat(styles.actionSheetParent));return t?t.scrollTop:0}return 0},{bottomHeightProperty:o}=useGetHeightProperties(),i=computed((()=>{let t={paddingBottom:e.noPaddingBottom?"0px":o.value};return a.y>0&&!e.forbiddenSwipe&&0!==a.initial&&(t={...t,transform:"translateY(".concat(a.y,"px)")}),e.style&&(t={...t,...e.style}),t})),s=computed((()=>e.type[0].toUpperCase()+e.type.slice(1)));return{slots:t,isTouchMoving:computed((()=>a.isTouchMoving)),touchStart:t=>{e.forbiddenSwipe||(a.initial=t.changedTouches[0].clientY,a.contentsInitialScrollTop=r(t.target))},touchEnd:()=>{if(!e.forbiddenSwipe){if(a.isTouchMoving=!1,a.isSheetMoving=!1,a.y>150)return n("close"),a.initial=0,void(a.y=0);a.initial=0,a.contentsInitialScrollTop=0,a.y=0}},touchMove:t=>{const n=r(t.target);if(!(n>0)&&(!e.forbiddenSwipe&&t.cancelable&&n<0&&(t.stopPropagation(),t.preventDefault()),!e.forbiddenSwipe&&n<=0)){a.isTouchMoving=!0;const e=t.changedTouches[0].clientY-a.initial-a.contentsInitialScrollTop;a.y=e>=0?e:0}},parentStyle:i,close:()=>{e.show&&n("close")},capitalizedTypeValue:s,disableScroll:computed((()=>a.y>0))}},render(){return createVNode(Fragment,null,[!this.noOverlay&&createVNode(OverLay,{show:this.show,click:this.close},null),createVNode(Transition,{appear:this.appear,onAfterLeave:()=>this.$emit("afterLeave"),"enter-active-class":styles["enterActive".concat(this.capitalizedTypeValue)],"leave-active-class":styles["leaveActive".concat(this.capitalizedTypeValue)],"enter-from-class":styles["enterFrom".concat(this.capitalizedTypeValue)]},{default:()=>{var e,t;return[withDirectives(createVNode("div",{role:"alert"===this.type?"alertdialog":"dialog",class:[styles.actionSheetWrapper,styles.actionSheetParent,{[styles.round]:this.round,[styles.fullscreen]:this.fullScreen,[styles.moving]:this.isTouchMoving,[styles.disableScroll]:this.disableScroll,[styles.alert]:"alert"===this.type,[styles.responsive]:"alert"!==this.type},this.class,"ppmna-reset-css"],onTouchstart:this.touchStart,onTouchend:this.touchEnd,onTouchmove:this.touchMove,onTransitionend:()=>this.$emit("transitionEnd"),style:this.parentStyle},[createVNode("div",{style:this.topSpacerStyle},null),createVNode("div",{class:[styles.actionSheetContainer,this.containerClass]},[null==(t=(e=this.slots).default)?void 0:t.call(e)])]),[[vShow,this.show]])]}})])}}),ja$2={desktopTitle:{addNewAddress:"新規住所登録",editAddress:"住所の変更",paymentCompletion:"{paymentLabel1}完了",getUserAddress:"住所"},choosePayment:{title:"チャージ方法の選択",desc1:"チャージ方法の追加は、",desc2:"「アカウント」＞「支払い方法の管理」から可能です",addMethod:"チャージ方法を追加してください",noMethod:"登録されたチャージ方法がありません\nPayPayアプリからチャージ方法を\n追加してください"},errorSheet:{title:"閉じる",title1:"読み込みに失敗しました",desc:"時間をおいて再度お試しください",topup:"チャージできませんでした",topupDesc:"エラーが発生しました\nお手数ですが、再度お試しください",pay:"支払い処理に失敗しました",payDesc:"エラーが発生しました\nお手数ですが、再度お試しください",tryAgain:"お手数ですが、再度お試しください"},softbank:{desc:"ソフトバンク・ワイモバイル",desc1:"まとめて支払い",isDisable:"ジャパンネット銀行に問題が発生しているため、一時的にご利用できません"},"3dSecureSheet":{title:"本人認証（3Dセキュア）の設定が必要です",descriptionForYJCardOrPPCard:"本人認証の設定が完了していない\nPayPayカードまたはヤフーカード\nからはチャージできません\n本人認証の設定をしてください",description:"本人認証の設定が完了していない\nクレジットカードからはチャージできません\n本人認証の設定をしてください",setting3DSecure:"本人認証（3Dセキュア）を設定する",about3DSecure:"本人認証（3Dセキュア）とは？",close:"閉じる"}},translationShared={ja:ja$2,en:ja$2},_sfc_main$1=defineComponent({components:{ActionSheet:ActionSheet,PButton:PButton,FontSizeProvider:FontSizeProvider},props:{show:{type:Boolean,default:!1},errorTitle:{type:String,default:""},errorText:{type:String,default:translationShared[getTranslationLanguage()].errorSheet.desc},iconUrl:{type:String,default:img_iconError},buttonList:{type:Array,default:null},iconStyle:{type:Object,default:()=>({height:"50px",width:"auto"})},canCloseByOutsideTap:{type:Boolean,default:!0}},emits:{"close-click":()=>!0,nativeAction:e=>!0,"after-leave":()=>!0},setup:(e,{emit:t})=>({handleClose:()=>{e.canCloseByOutsideTap&&t("close-click")},style:useCssModule()}),data:()=>({lg:translationShared[getTranslationLanguage()]}),computed:{buttonListData(){if(!this.buttonList)return null;const e=[];for(const t of this.buttonList)t.actionType&&e.push(t);return e.length>0?filterErrorButtonList(e):this.buttonList},onlyButton(){var e;return 1===(null==(e=this.buttonListData)?void 0:e.length)}},methods:{buttonClick(e){if(null==e?void 0:e.actionType){if((null==e?void 0:e.actionType)===UIComponentsButtonActionType.DEEPLINK)return(null==e?void 0:e.deeplink)&&isValidUrl(e.deeplink)?void openWebviewInternal({url:null==e?void 0:e.deeplink}):(this.openWebView(e),void closeApp({options:{deeplink:e.deeplink,closeConfirmation:!1}}));if(e.actionType===UIComponentsButtonActionType.NATIVE)return void this.$emit("nativeAction",e)}else if(null==e?void 0:e.onClick)return void e.onClick();this.$emit("close-click")},openWebView(e){if(e.deeplink)try{const t=new URL(e.deeplink),n=t.searchParams.get("url");if(e.deeplink.startsWith("paypay://")&&("embed"===t.host||"//embed"===t.pathname)&&n)return void openWebviewInternal({url:n})}catch(t){}},getButtonType:getButtonType}}),errorContainer="_errorContainer_rzmha_2",errorIcon="_errorIcon_rzmha_15",unit="_unit_rzmha_22",errorTitle="_errorTitle_rzmha_25",subTitle="_subTitle_rzmha_41",btnContainer="_btnContainer_rzmha_57",closeBtn="_closeBtn_rzmha_61",style0$1={"ppmna-default-font":"_ppmna-default-font_rzmha_1",errorContainer:errorContainer,errorIcon:errorIcon,unit:unit,errorTitle:errorTitle,subTitle:subTitle,btnContainer:btnContainer,closeBtn:closeBtn},_hoisted_1$1=["src"];function _sfc_render$1(e,t,n,a,r,o){const i=resolveComponent("PButton"),s=resolveComponent("ActionSheet"),l=resolveComponent("FontSizeProvider");return openBlock(),createBlock(l,null,{default:withCtx((()=>[createVNode(s,{show:e.show,type:"alert",onClose:e.handleClose,onAfterLeave:t[1]||(t[1]=t=>e.$emit("after-leave"))},{default:withCtx((()=>[createBaseVNode("div",{class:normalizeClass(e.style.errorContainer)},[createBaseVNode("div",{class:normalizeClass(e.style.unit)},[createBaseVNode("img",{src:e.iconUrl,class:normalizeClass(e.style.errorIcon),style:normalizeStyle(e.iconStyle),alt:""},null,14,_hoisted_1$1)],2),e.errorTitle?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.style.errorTitle),"data-testid":"errorTitle"},toDisplayString(e.errorTitle),3)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(e.style.subTitle),"data-testid":"errorText"},toDisplayString(e.errorText),3),e.buttonListData?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(e.style.btnContainer)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.buttonListData,((t,n)=>(openBlock(),createElementBlock("div",{key:n},[createVNode(i,{block:"",type:e.getButtonType(t,e.onlyButton),onClick:n=>e.buttonClick(t)},{default:withCtx((()=>[createTextVNode(toDisplayString(t.title),1)])),_:2},1032,["type","onClick"])])))),128))],2)):(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(e.style.btnContainer)},[createVNode(i,{block:"",type:"primary","data-testid":"error-sheet-close",class:normalizeClass(e.style.closeBtn),onClick:t[0]||(t[0]=t=>e.buttonClick())},{default:withCtx((()=>[createTextVNode(toDisplayString(e.lg.errorSheet.title),1)])),_:1},8,["class"])],2))],2)])),_:1},8,["show","onClose"])])),_:1})}const cssModules$1={$style:style0$1},ErrorSheet=_export_sfc(_sfc_main$1,[["render",_sfc_render$1],["__cssModules",cssModules$1]]),ShowUpdateWarningUserAction={update:"UPDATE",ignore:"IGNORE"},ja$1={showUpdateWarning:{closeBtn:"閉じる",notNow:"今はしない",update:"アプリをアップデート",title:"機能を正常に利用するには\n最新版のバージョンのアプリが必要です",errorText:"このウェブサイトのポップアップを許可してください",desc1:"アプリを最新のバージョンに\nアップデートしてください",desc2:"現在のバージョンでは\n機能が正常に動作しない場合があります"}},translation={ja:ja$1,en:ja$1},_sfc_main=defineComponent({components:{ActionSheet:ActionSheet,PButton:PButton,ErrorSheet:ErrorSheet,FontSizeProvider:FontSizeProvider},props:{show:Boolean,warningParams:{type:Object,default:()=>{}}},emits:{closeClick:()=>!0},data:()=>({errorShow:!1,lg:translation[getTranslationLanguage()],img_iconAppUpdate:img_iconAppUpdate}),computed:{description(){var e;return(null==(e=this.warningParams)?void 0:e.isMandatory)?this.lg.showUpdateWarning.desc1:this.lg.showUpdateWarning.desc2},btnText(){var e;return(null==(e=this.warningParams)?void 0:e.isMandatory)?this.lg.showUpdateWarning.closeBtn:this.lg.showUpdateWarning.notNow}},methods:{handleClick(e){var t,n,a,r,o;try{e===ShowUpdateWarningUserAction.update&&openWebviewInternal({url:"https://itunes.apple.com/app/id1435783608",style:"external"}),null==(n=null==(t=this.warningParams)?void 0:t.success)||n.call(t,{userAction:e});const r=null==(a=this.warningParams)?void 0:a.isMandatory;setTimeout((function(){r&&closeApp({options:{closeConfirmation:!1}})}),300)}catch(i){this.errorShow=!0,null==(o=null==(r=this.warningParams)?void 0:r.fail)||o.call(r,{errorCode:MiniAppErrorType.unknown})}finally{this.$emit("closeClick")}},close(){var e;(null==(e=this.warningParams)?void 0:e.isMandatory)||this.$emit("closeClick")},closeErrorSheet(){this.errorShow=!1}}}),showUpdateWarningModal="_showUpdateWarningModal_gqmiu_2",updateBody="_updateBody_gqmiu_12",updateIcon="_updateIcon_gqmiu_26",updateTitle="_updateTitle_gqmiu_29",updateFooter="_updateFooter_gqmiu_44",style0={"ppmna-default-font":"_ppmna-default-font_gqmiu_1",showUpdateWarningModal:showUpdateWarningModal,updateBody:updateBody,updateIcon:updateIcon,updateTitle:updateTitle,updateFooter:updateFooter},_hoisted_1=["src"];function _sfc_render(e,t,n,a,r,o){const i=resolveComponent("PButton"),s=resolveComponent("ActionSheet"),l=resolveComponent("ErrorSheet"),c=resolveComponent("FontSizeProvider");return openBlock(),createBlock(c,null,{default:withCtx((()=>[createVNode(s,{show:e.show,onClose:e.close},{default:withCtx((()=>[createBaseVNode("div",{class:normalizeClass(e.$style.showUpdateWarningModal),"data-testid":"show-update-warning-modal"},[createBaseVNode("img",{src:e.img_iconAppUpdate,class:normalizeClass(e.$style.updateIcon),alt:"アップデート"},null,10,_hoisted_1),createBaseVNode("span",{class:normalizeClass(e.$style.updateTitle),"data-testid":"update-title"},toDisplayString(e.lg.showUpdateWarning.title),3),createBaseVNode("span",{class:normalizeClass(e.$style.updateBody),"data-testid":"update-body"},toDisplayString(e.description),3),createBaseVNode("div",{class:normalizeClass(e.$style.updateFooter)},[createVNode(i,{type:"primary","data-testid":"update-btn",block:"",onClick:t[0]||(t[0]=t=>e.handleClick("UPDATE"))},{default:withCtx((()=>[createTextVNode(toDisplayString(e.lg.showUpdateWarning.update),1)])),_:1}),createVNode(i,{type:"link","data-testid":"ignore-btn",block:"",onClick:t[1]||(t[1]=t=>e.handleClick("IGNORE"))},{default:withCtx((()=>[createTextVNode(toDisplayString(e.btnText),1)])),_:1})],2)],2)])),_:1},8,["show","onClose"]),createVNode(l,{show:e.errorShow,"error-title":"","error-text":e.lg.showUpdateWarning.errorText,onCloseClick:t[2]||(t[2]=t=>e.closeErrorSheet())},null,8,["show","error-text"])])),_:1})}const cssModules={$style:style0},AppVue=_export_sfc(_sfc_main,[["render",_sfc_render],["__cssModules",cssModules]]),initShowUpdateWarning=e=>{const t=ref(!0),n=reactive(e),a=()=>{t.value=!1,setTimeout((()=>{var t;document.body.removeChild(o),r.unmount(),null==(t=null==e?void 0:e.complete)||t.call(e)}),300)},r=createApp({setup:()=>(usePopStateHandler(a,n),()=>h(AppVue,{show:t.value,warningParams:n,onCloseClick:()=>{a()}}))}),o=document.createElement("div");o.className="ppmna-reset-css",r.config.errorHandler=makeDefaultErrorHandler(r,e),r.mount(o),document.body.appendChild(o)};function showUpdateWarning(e){const t=e.success,n=e.fail,a=e.complete;t&&(e.success=createWrap(t)),n&&(e.fail=createWrap(n)),a&&(e.complete=createWrapComplete(a)),initShowUpdateWarning(e)}const initErrorSheet=e=>{var t;const n=ref(!0),a=reactive(e),r=()=>{var e;n.value=!1,null==(e=null==a?void 0:a.success)||e.call(a),setTimeout((()=>{var e;document.body.removeChild(s),i.unmount(),null==(e=null==a?void 0:a.complete)||e.call(a)}),300)};let o;(null==a?void 0:a.buttons)&&(o=[],null==(t=null==a?void 0:a.buttons)||t.slice(0,2).forEach((function(e){null==o||o.push({buttonType:e.style===ButtonStyle.primary?UIComponentsButtonType.BLUE:UIComponentsButtonType.WHITE,nativeAction:"",title:e.title,actionType:e.link?UIComponentsButtonActionType.DEEPLINK:UIComponentsButtonActionType.CLOSE,googleAnalyticsInfo:null,type:null,deeplink:e.link})})));const i=createApp({setup:()=>(usePopStateHandler(r,e),()=>h(ErrorSheet,{show:n.value,errorTitle:null==a?void 0:a.title,errorText:null==a?void 0:a.text,buttonList:o,onCloseClick:()=>{r()}}))}),s=document.createElement("div");s.className="ppmna-reset-css",i.config.errorHandler=makeDefaultErrorHandler(i,a),i.mount(s),document.body.appendChild(s)};function showErrorSheet(e){var t,n;const a=e.success,r=e.fail,o=e.complete;a&&(e.success=createWrap(a)),r&&(e.fail=createWrap(r)),o&&(e.complete=createWrapComplete(o));try{initErrorSheet(e)}catch(i){null==(t=null==e?void 0:e.fail)||t.call(e,{errorCode:MiniAppErrorType.unknown}),null==(n=null==e?void 0:e.complete)||n.call(e)}}async function requestInternal(e){var t,n,a,r,o;const i=reconstructParams(e);try{if(!(await fetchAppDetail()).isInternal)return null==(t=null==i?void 0:i.fail)?void 0:t.call(i,{errorCode:MiniAppErrorType.insufficientScope})}catch(s){return null==(n=null==i?void 0:i.fail)?void 0:n.call(i,{errorCode:MiniAppErrorType.serverError})}try{const e=await ppFetch({method:"POST",url:"web-api/app/v1/internal/request",data:{target:null==i?void 0:i.endpointType,httpMethod:null==i?void 0:i.method,endpoint:null==i?void 0:i.path,requestBody:null==i?void 0:i.data},headers:null==i?void 0:i.header,skipResultCodeCheck:!0,skipStatusCodeCheck:!0});return"success"!==(null==e?void 0:e.ppFetchResult)?null==(a=null==i?void 0:i.fail)?void 0:a.call(i,{errorCode:getFailErrorCode(e.ppFetchResult)}):null==(r=null==i?void 0:i.success)?void 0:r.call(i,{statusCode:null==e?void 0:e.statusCode,data:JSON.stringify(null==e?void 0:e.body)})}catch(s){return null==(o=null==i?void 0:i.fail)?void 0:o.call(i,{errorCode:MiniAppErrorType.statusCodeError})}}var PermissionStatus=(e=>(e.granted="GRANTED",e.denied="DENIED",e))(PermissionStatus||{});const PermissionName={mini_app_payment_balance:"mini_app_payment_balance",mini_app_device_info:"mini_app_device_info",mini_app_user_contacts:"mini_app_user_contacts",mini_app_device_battery:"mini_app_device_battery",mini_app_kyc:"mini_app_kyc",mini_app_user_location:"mini_app_user_location",mini_app_check_payment_method:"mini_app_check_payment_method",cashback:"cashback",bank_registration:"bank_registration",mini_app_user_email_address:"mini_app_user_email_address",mini_app_user_address:"mini_app_user_address",mini_app_user_phone_camera:"mini_app_user_phone_camera",mini_app_user_phone_album:"mini_app_user_phone_album",mini_app_bank_information:"mini_app_bank_information",mini_app_cashback_information:"mini_app_cashback_information",mini_app_user_phone_number:"mini_app_user_phone_number",mini_app_user_name:"mini_app_user_name",mini_app_user_nickname:"mini_app_user_nickname",mini_app_user_avatar:"mini_app_user_avatar",mini_app_user_signup_date:"mini_app_user_signup_date",mini_app_user_employer_info:"mini_app_user_employer_info",mini_app_user_gender:"mini_app_user_gender",direct_debit:"direct_debit",continuous_payments:"continuous_payments",pending_payments:"pending_payments",preauth_capture_native:"preauth_capture_native",mini_app_point_usage_setting:"mini_app_point_usage_setting",mini_app_user_payment_limit:"mini_app_user_payment_limit",mini_app_user_p2p_limit:"mini_app_user_p2p_limit",mini_app_user_topup_limit:"mini_app_user_topup_limit",merchant_topup:"merchant_topup",mini_app_notification_center:"mini_app_notification_center",push_notification:"push_notification",notification_center_tl:"notification_center_tl",user_info_softbank_user:"user_info_softbank_user",user_info_yahoo_mobile_user:"user_info_yahoo_mobile_user",user_info_yahoo_premium_user:"user_info_yahoo_premium_user",user_info_tpoint:"user_info_tpoint",mini_app_transaction:"mini_app_transaction",mini_app_device_esim_info:"mini_app_device_esim_info"},checkPermission=async e=>{try{if((await fetchAppDetail()).isInternal)return PermissionStatus.granted;const t=await getUserGrantedPermission();e=Array.isArray(e)?e:[e];for(const n of e)if(!(null==t?void 0:t.find((e=>e===n))))return PermissionStatus.denied;return PermissionStatus.granted}catch(t){throw Error(MiniAppErrorType.serverError)}};async function getUserGrantedPermission(){var e,t,n,a;try{const r=await ppFetch({method:"GET",url:"web-api/app/v1/users/permissions/granted"});if("success"!==(null==r?void 0:r.ppFetchResult))throw Error(MiniAppErrorType.serverError);return null!=(a=null==(n=null==(t=null==(e=null==r?void 0:r.body)?void 0:e.unsigned)?void 0:t.data)?void 0:n.scopes)?a:[]}catch(r){throw Error(MiniAppErrorType.serverError)}}const ESimSupported={SUPPORTED:"SUPPORTED",NOT_SUPPORTED:"NOT_SUPPORTED",UNKNOWN:"UNKNOWN"};function getDeviceInformation(e){execute$1(reconstructParams(e))}async function execute$1(e){var t,n;try{const n=await checkPermission(PermissionName.mini_app_device_esim_info),a=getRuntime(),r={os:a===MiniAppRuntime.web?navigator.platform:a.toLowerCase()};n===PermissionStatus.granted&&(r.eSimSupported=getESimSupported()),null==(t=null==e?void 0:e.success)||t.call(e,r)}catch(a){return void(null==(n=null==e?void 0:e.fail)||n.call(e,{errorCode:MiniAppErrorType.serverError}))}}function getESimSupported(){switch(getValueFromUA("e")){case"0":default:return ESimSupported.UNKNOWN;case"1":return ESimSupported.SUPPORTED;case"2":return ESimSupported.NOT_SUPPORTED}}function log(e){return(...e)=>{}}const logger={error:log(),warn:log(),info:log(),log:log(),debug:log()};function normalizeNativeResponseData(e){if("number"!=typeof e.status)return e;let t={};try{t=JSON.parse(e.msg)}catch(n){}return{status:[1,2].includes(e.status)?"success":"fail",data:t}}class JsBridge{constructor(e){this.version="2.53.0",this.revision="4f8a4ec",this.responseCallbacks=new Map,this.global=e}generateCallbackId(){return["cb_",Math.random().toString(36).slice(2,10),"_",(new Date).getTime()].join("")}callNative(e,t,n={}){const{complete:a,fail:r,success:o,...i}=t||{},{transformResponse:s=e=>e}=n;try{this.dispatchMessageToNative(e,i,((t,n)=>{var i,l,c;const u=(null==(c=null==(l=null==(i=this.global)?void 0:i.webkit)?void 0:l.messageHandlers)?void 0:c[e])?JSON.parse(null==t?void 0:t.data):null==t?void 0:t.data;switch(t.status){case"complete":a&&a(u),this.responseCallbacks.delete(n);break;case"fail":null==r||r(u);break;case"success":null==o||o(s(u))}}))}catch(l){null==r||r(l)}}dispatchMessageToNative(e,t,n){var a,r,o,i,s;const l=this.generateCallbackId();this.responseCallbacks.set(l,n);const c={callbackId:l,params:t};(null==(o=null==(r=null==(a=this.global)?void 0:a.webkit)?void 0:r.messageHandlers)?void 0:o[e])?this.global.webkit.messageHandlers[e].postMessage(c):(null==(s=null==(i=this.global)?void 0:i.messageHandlers)?void 0:s[e])&&this.global.messageHandlers[e](JSON.stringify(c))}handleMessageFromNative(e){const t=this.responseCallbacks.get(e.responseId);t&&(t(normalizeNativeResponseData(e.responseData),e.responseId),"complete"!==e.responseData.status&&"number"!=typeof e.responseData.status||(this.responseCallbacks.delete(e.responseId),logger.log({log:"DELETED",responseId:e.responseId})))}_handleMessageFromNative(e){this.handleMessageFromNative(e)}}const jsBridgeNamespace="_PayPayJsBridge",jsBridge=new JsBridge(window);function getPlatformInformation(e){execute(reconstructParams(e))}function execute(e){var t;const n=getPayPayLanguage(),a=getAppVersion();null==(t=null==e?void 0:e.success)||t.call(e,{appVersion:a,preferredLanguage:n,fontSize:getPlatformFontSize()})}function executeDynamicImport(e,t,n){e.then(t).catch((()=>{var e,t;null==(e=n.fail)||e.call(n,{errorCode:MiniAppErrorType.notReachable}),null==(t=n.complete)||t.call(n)}))}window[jsBridgeNamespace]=jsBridge;class MiniAppModule{constructor(e){this.jsBridge=e,this.isExecuting=!1}isExecutableService(e){var t,n;if(this.isExecuting)return null==(t=null==e?void 0:e.fail)||t.call(e,{errorCode:MiniAppErrorType.activeRequestExists}),null==(n=null==e?void 0:e.complete)||n.call(e),!1;this.isExecuting=!0;const a=null==e?void 0:e.complete;return e.complete=()=>{this.isExecuting=!1,null==a||a()},!0}detectMode(){return getRuntime()===MiniAppRuntime.android?"NATIVE":"JS"}handleModuleLoadingFailure(e){var t,n;null==(t=null==e?void 0:e.fail)||t.call(e,{errorCode:MiniAppErrorType.notReachable}),null==(n=null==e?void 0:e.complete)||n.call(e)}init(e){checkMakeIframeVisible(),init$1(e).catch((()=>{}))}getCashbackInformation(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getCashbackInformation-xi97Udc-.js")),__vite__mapDeps([0,1]),import.meta.url),(t=>t.getCashbackInformation(e)),e)}openWebview(e){sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./runtime-dom.esm-bundler-DKDpRFCQ.js").then((e=>e.cT))),[],import.meta.url),(t=>t.openWebview(e)),e)}openMap(e){if(sendMakeIframeVisible(e),"JS"===this.detectMode()){if(!this.isExecutableService(e))return;executeDynamicImport(__vitePreload((()=>import("./openMap-i9NtVYsQ.js")),__vite__mapDeps([2,1,3]),import.meta.url),(t=>t.openMap(e)),e)}else this.jsBridge.callNative("openMap",e)}closeApp(e){checkMakeIframeVisible(),closeApp(e)}request(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./request-dBb67d4B.js")),__vite__mapDeps([4,1]),import.meta.url),(t=>t.request(e)),e)}requestInternal(e){checkMakeIframeVisible(),requestInternal(e)}getUAID(e){checkMakeIframeVisible(),getUAID(e)}getBalance(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getBalance-CFxoWwJJ.js")),__vite__mapDeps([5,1]),import.meta.url),(t=>t.getBalance(e)),e)}getAuthStatus(e){checkMakeIframeVisible(),getAuthStatus(e).catch((()=>{}))}makePayment(e){this.isExecutableService(e)&&(sendMakeIframeVisible(e),__vitePreload((()=>import("./makePayment-Cuan6UUl.js")),__vite__mapDeps([6,1,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url).then((t=>{setTimeout((()=>{t.makePayment(e)}),0)})).catch((()=>{this.handleModuleLoadingFailure(e)})))}createOrder(e){sendMakeIframeVisible(e),__vitePreload((()=>import("./makePayment-Cuan6UUl.js")),__vite__mapDeps([6,1,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url).then((t=>{setTimeout((()=>{t.makePayment(e)}),0)})).catch((()=>{this.handleModuleLoadingFailure(e)}))}getUserProfile(e){checkMakeIframeVisible(),getUserProfile(e)}topup(e){this.isExecutableService(e)&&(sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./topup-CHGtamnV.js")),__vite__mapDeps([30,1,16,12,13,14,17,7,8,18,19,20,10,11,21,22,27,28,31]),import.meta.url),(t=>t.topup(e)),e))}getPermissionStatus(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getPermissionStatus-BBgHfyuC.js")),__vite__mapDeps([32,1]),import.meta.url),(t=>t.getPermissionStatus(e)),e)}scanCode(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./scanCode-DXbr0gUm.js")),__vite__mapDeps([33,1]),import.meta.url),(t=>t.scanCode(e)),e)}showAlert(e){sendMakeIframeVisible(e),"JS"===this.detectMode()?showAlert(e):this.jsBridge.callNative("showAlert",e)}showErrorSheet(e){sendMakeIframeVisible(e),showErrorSheet(e)}getTopBarHeight(e){checkMakeIframeVisible(),getTopBarHeight(e)}showUpdateWarning(e){sendMakeIframeVisible(e),"JS"===this.detectMode()?showUpdateWarning(e):this.jsBridge.callNative("showUpdateWarning",e)}getPlatformInformation(e){checkMakeIframeVisible(),getPlatformInformation(e)}getDeviceInformation(e){checkMakeIframeVisible(),getDeviceInformation(e)}openApp(e){sendMakeIframeVisible(e),"JS"===this.detectMode()?executeDynamicImport(__vitePreload((()=>import("./openApp-CgQ7WbyP.js")),__vite__mapDeps([34,1,35]),import.meta.url),(t=>t.openApp(e)),e):this.jsBridge.callNative("openApp",e)}share(e){checkMakeIframeVisible(),"JS"===this.detectMode()?executeDynamicImport(__vitePreload((()=>import("./share-aU_Tr_V-.js")),__vite__mapDeps([36,1]),import.meta.url),(t=>t.share(e)),e):this.jsBridge.callNative("share",e)}getKycInformation(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getKycInformation-BuC4kKWT.js")),__vite__mapDeps([37,1]),import.meta.url),(t=>t.getKycInformation(e)),e)}getUserAddress(e){sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./getUserAddress-D9sEvkeY.js")),__vite__mapDeps([38,1,24,9,10,11,12,13,14,7,8,15,18,25,27,28]),import.meta.url),(t=>t.getUserAddress(e)),e)}inputAddress(e){this.isExecutableService(e)&&(sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./inputAddress-TQ_KNonf.js")),__vite__mapDeps([39,1,9,10,11,12,13,14,7,8,15,27,28]),import.meta.url),(t=>t.inputAddress(e)),e))}getUserLocation(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getUserLocation-BRArjbew.js")),__vite__mapDeps([40,1]),import.meta.url),(t=>t.getUserLocation(e)),e)}checkPaymentMethod(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./checkPaymentMethod-KViwoWbz.js")),__vite__mapDeps([41,1]),import.meta.url),(t=>t.checkPaymentMethod(e)),e)}registerEmail(e){this.isExecutableService(e)&&(sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./registerEmail-DxJ7zUSM.js")),__vite__mapDeps([42,1,10,11,26,43]),import.meta.url),(t=>t.registerEmail(e)),e))}setEnablePullDownRefresh(e){checkMakeIframeVisible(),this.jsBridge.callNative("setEnablePullDownRefresh",e)}registerKyc(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./registerKyc-Dn5-nKZa.js")),__vite__mapDeps([44,1]),import.meta.url),(t=>t.registerKyc(e)),e)}startMultiFactorAuth(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./startMultiFactorAuth-DI0k_DIN.js")),__vite__mapDeps([45,1]),import.meta.url),(t=>t.startMultiFactorAuth(e)),e)}logout(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./logout-BtyGzgLQ.js")),__vite__mapDeps([46,1]),import.meta.url),(t=>t.logout(e)),e)}verifyMultiFactorAuthResult(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./verifyMultiFactorAuthResult-CshgeF9v.js")),__vite__mapDeps([47,1]),import.meta.url),(t=>t.verifyMultiFactorAuthResult(e)),e)}registerUserInfo(e){sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./registerUserInfo-CDonnmwm.js")),__vite__mapDeps([48,23,1,27,28,13,42,10,11,26,43,49]),import.meta.url),(t=>t.registerUserInfo(e)),e)}getBankInfo(e){sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./getBankInfo-CUJIpW-A.js")),__vite__mapDeps([50,1,7,8,28,51]),import.meta.url),(t=>t.getBankInfo(e)),e)}registerPaymentFeatures(e){sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./registerPaymentFeatures-Cjx663zy.js")),__vite__mapDeps([52,23,1,17,7,8,18,19,27,28,53]),import.meta.url),(t=>t.registerPaymentFeatures(e)),e)}addShortcut(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./addShortcut-Y6MaKw3f.js")),__vite__mapDeps([54,1]),import.meta.url),(t=>t.addShortcut(e)),e)}shortcutExists(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./shortcutExists-CjJtrzWw.js")),__vite__mapDeps([55,1]),import.meta.url),(t=>t.shortcutExists(e)),e)}getUserPaymentFeatureSettings(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getUserPaymentFeatureSettings-CTko90o_.js")),__vite__mapDeps([56,1]),import.meta.url),(t=>t.getUserPaymentFeatureSettings(e)),e)}smsAuth(e){sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./smsAuth-BKujR8T4.js").then((e=>e.a))),__vite__mapDeps([57,1,23,58]),import.meta.url),(t=>t.smsAuth(e)),e)}initKycPassport(e){sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./initKycPassport-DtraUCY6.js")),__vite__mapDeps([59,60,1,45,57,23,58]),import.meta.url),(t=>t.initKycPassport(e)),e)}getKycPassportInfo(e){sendMakeIframeVisible(e),executeDynamicImport(__vitePreload((()=>import("./getKycPassportInfo-SWeQv_73.js")),__vite__mapDeps([61,1,45,57,23,58,47,60]),import.meta.url),(t=>t.getKycPassportInfo(e)),e)}getAllUserAddresses(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getAllUserAddresses-Bnk9i2o6.js")),__vite__mapDeps([62,1]),import.meta.url),(t=>t.getAllUserAddresses(e)),e)}getTransactionInfo(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getTransactionInfo-BCoGzYDu.js")),__vite__mapDeps([63,1]),import.meta.url),(t=>t.getTransactionInfo(e)),e)}getTransactions(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getTransactions-D5A8qS6D.js")),__vite__mapDeps([64,1]),import.meta.url),(t=>t.getTransactions(e)),e)}getPayPayCardInfo(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getPayPayCardInfo-YMOI_DDo.js")),__vite__mapDeps([65,1]),import.meta.url),(t=>t.getPayPayCardInfo(e)),e)}getExternalLinkageInformation(e){checkMakeIframeVisible(),executeDynamicImport(__vitePreload((()=>import("./getExternalLinkageInformation-CPiXTJ_W.js")),__vite__mapDeps([66,1]),import.meta.url),(t=>t.getExternalLinkageInformation(e)),e)}}const pp=new MiniAppModule(jsBridge);async function topup(e,t,n){var a,r,o,i;isProdEnv()||null==t.feePercentage||1234!==t.amount.amount&&12345!==(null==n?void 0:n.amount.amount)||(t={...t,feePercentage:0});const s=await ppFetch({method:"POST",url:"web-api/app/v1/payment/topup",params:e,data:t});return"success"!==(null==s?void 0:s.ppFetchResult)||saveTopup({amount:null==(i=null==(o=null==(r=null==(a=null==s?void 0:s.body)?void 0:a.unsigned)?void 0:r.data)?void 0:o.amount)?void 0:i.amount}),s}async function getBalanceInfoForTopupSheet(e){return await ppFetch({method:"GET",url:"/web-api/app/platform/v2/balance",headers:{"INTERNAL-CALL":"true"},params:e})}async function getAddressByZip(e){return await ppFetch({method:"GET",url:"web-api/app/v1/addressbyzip",params:e})}async function getAddressList(){return ppFetch({method:"GET",url:"web-api/app/v1/users/addresslist",params:{type:"PREFERRED"}})}async function postAddress(e){return await ppFetch({method:"POST",url:"web-api/app/v1/users/address",data:e})}async function getOtp(){return await ppFetch({method:"POST",url:"web-api/app/v1/otp/issue"})}async function getInitKycPassport(e){const t=!0===e.getCompletedKycOnly;return await ppFetch({method:"GET",url:"web-api/app/v2/users/kyc",params:{type:"EKYC",eKycDocuments:e.eKycDocuments,kaasRequestType:"INIT",getCompletedKycOnly:t},headers:{"Native-Device-Id":getDeviceUUIDFromNative()}})}async function verifyOtp(e){return await ppFetch({method:"POST",url:"/web-api/app/v1/otp/verify",data:e})}async function editAddress(e,t){return await ppFetch({method:"PUT",url:"web-api/app/v1/users/address/".concat(t),data:e})}async function deleteAddress(e){return await ppFetch({method:"DELETE",url:"web-api/app/v1/users/address/".concat(e)})}async function setSelectedAddress(e){return ppFetch({url:"web-api/app/v1/users/address/selected/".concat(e),method:"PUT"})}async function getUserProfileData(){return ppFetch({url:"web-api/app/v1/users/profile",method:"GET"})}async function getUserProfileDataV2(){return ppFetch({url:"web-api/app/v2/internal/users/profile",method:"GET"})}async function registerEmail(e){return ppFetch({url:"web-api/app/v1/users/email",method:"POST",data:{email:e}})}async function resendEmail(){return ppFetch({url:"web-api/app/v1/users/resendVerification",method:"POST"})}function getUserLocationRequest(e){return ppFetch({url:"web-api/app/v1/location",method:"GET",params:{validTimeMinutes:e.validTimeMinutes}})}async function getExpectedCashbackInfo(e){const t={merchant:null==e?void 0:e.merchantAlias},n={requestId:v4(),amount:null==e?void 0:e.amount,requestedAt:null==e?void 0:e.requestedAt,orderItems:null==e?void 0:e.orderItems,productType:null==e?void 0:e.productType,storeId:null==e?void 0:e.storeId,merchantPaymentId:null==e?void 0:e.merchantPaymentId};return await ppFetch({method:"POST",url:"web-api/app/v1/smartpayment/cashback/expected",params:t,data:n})}window.pp=pp;const en={smartLogin:{title:"Sign In with PayPay",signIn:"Sign In",continueAs:"Continue as {user}"},smartPay:{paypay:"PayPay",cashback:"Up to {cashback}% Rewards"},type:{payment:{pay:"Pay with PayPay"},donation:{pay:"Donate with PayPay"},remittance:{pay:"Remit with PayPay"},deposit:{pay:"Deposit with PayPay"}}},ja={smartLogin:{title:"PayPayでログイン",signIn:"ログイン",continueAs:"{user}として続ける"},smartPay:{paypay:"PayPay",cashback:"最大{cashback}%還元"},type:{payment:{pay:"PayPayで支払う"},donation:{pay:"PayPayで寄付"},remittance:{pay:"PayPayで送金"},deposit:{pay:"PayPayで入金"}}};async function getRenderPayInfo(e){const t=(null==e?void 0:e.locale)||getPayPayLanguage(),n="en"===t?en:ja,a=!e.getDefault&&await getIsLoggedIn();let r,o=e;if(!a&&!e.url&&!e.redirectUrl)throw new PPError("User is not logged in and redirect or login URL is not provided",MiniAppErrorType.badRequest);if(a&&(o={...e,url:void 0},e.orderInfo)){const t=await getExpectedCashbackInfo(e.orderInfo);r="success"===t.ppFetchResult?createCashbackInfo(t.body):""}return{renderParams:o,data:await getRenderPayButtonInfo(e,n,a,r),isLoggedIn:a,preferredLanguage:t,isJustLoggedIn:OTTLoginState.isJustLoggedIn}}function createCashbackInfo(e){var t;if(null==(t=e.unsigned)?void 0:t.data){const{normalCashbackPercentage:t,lotteryCashbackPercentage:n}=e.unsigned.data;if(t||n){const e=Number((parseFloat(null!=t?t:"0")+parseFloat(null!=n?n:"0")).toFixed(1));return e?e.toString():""}}}function getIsLoggedIn(){return new Promise((e=>{getAuthStatus({isInternal:!0,success:()=>{e(!0)},fail:()=>{e(!1)}}).catch((()=>{e(!1)}))}))}async function getRenderPayButtonInfo(e,t,n,a){var r,o;let i=e.url;n||i||!e.redirectUrl||(i=(await getLoginUrlWithPkce({postLoginRedirectUrl:e.redirectUrl,postLoginRedirectType:e.redirectType})).loginUrl);const s=getPaymentLabelType(null==(r=e.orderInfo)?void 0:r.orderType,null==(o=e.orderInfo)?void 0:o.productType),l=t.type[s].pay;let c={title:(null==e?void 0:e.isShortText)?t.smartPay.paypay:l,loginUrl:i};return a&&(c={...c,cashbackInfo:updateLocalisedString(t.smartPay.cashback,"{cashback}",a)}),c}async function getRenderLoginInfo(e){var t;const n=(null==e?void 0:e.locale)||getPayPayLanguage(),{smartLogin:a}="en"===n?en:ja,r=getUserInfo();let o=e.url;!o&&e.redirectUrl&&(o=(await getLoginUrlWithPkce({postLoginRedirectUrl:e.redirectUrl,postLoginRedirectType:e.redirectType})).loginUrl);const i=r?JSON.parse(r):void 0;let s={title:(null==e?void 0:e.isShortText)?a.signIn:a.title,loginUrl:o};if(e.getDefault)return{data:s,preferredLanguage:n};if(null==i?void 0:i.nickName){let n=null==i?void 0:i.nickName;-1===(null==(t=null==i?void 0:i.avatarUrl)?void 0:t.indexOf("defaultAvatar@3x"))&&"sm"!==(null==e?void 0:e.buttonSize)&&(s={...s,avatarUrl:i.avatarUrl}),(null==e?void 0:e.isShortText)||"sm"===(null==e?void 0:e.buttonSize)||(n=updateLocalisedString(a.continueAs,"{user}",n)),s={...s,title:n}}return{data:s,preferredLanguage:n}}function getRenderButtonInfo(e){return"login"===e.type?getRenderLoginInfo(e):getRenderPayInfo(e)}initSentry(),WindowBridge.init(coreFunctions);const triggerFailCallback=(e,t,n)=>{var a,r;postMessageToClient(e,{name:t.data.name,result:PPFunctionResult.fail,data:{errorCode:n},messageId:t.data.messageId},t.origin,null==(a=t.data)?void 0:a.params),postMessageToClient(e,{name:t.data.name,result:PPFunctionResult.complete,messageId:t.data.messageId},t.origin,null==(r=t.data)?void 0:r.params)};function initCore(){addEventListener("message",(e=>{var t,n,a,r,o,i,s,l;if((null==(t=e.data)?void 0:t.forWindowBridge)||!(null==(n=e.data)?void 0:n.name)||!(null==(a=e.data)?void 0:a.messageId)&&(null==(r=e.data)?void 0:r.name)!==PPFunctionName.handleMessageFromNative||e.source===window)return;const c={params:["pp.".concat(e.data.name),"parameters: ",null==(o=e.data)?void 0:o.params]};handleDebugInfoTransfer(e.data.name,c,null==(i=e.data)?void 0:i.params),handleLogSDKEvent(e.data.name,"called",void 0,null==(s=e.data)?void 0:s.params);const u=e.source;if(e.data.name===PPFunctionName.init){const t=e.data.params;if(!initClientState({clientId:t.clientId,clientOrigin:e.origin,clientSdkType:t.clientSdkType}))return void triggerFailCallback(u,e,MiniAppErrorType.badRequest)}if(isMessageAllowed(e))switch(e.data.name){case PPFunctionName.init:init(e);break;case PPFunctionName.render:render(e);break;case PPFunctionName.logout:logout(e);break;case PPFunctionName.handleMessageFromNative:{const t=e.data.params;jsBridge._handleMessageFromNative(t.json);break}default:{const t=null==(l=pp[e.data.name])?void 0:l.bind(pp);if(!t)return;return void t({..."object"==typeof e.data.params?e.data.params:null,success:t=>{postMessageToClient(u,{name:e.data.name,result:PPFunctionResult.success,data:t,messageId:e.data.messageId},e.origin)},fail:t=>{postMessageToClient(u,{name:e.data.name,result:PPFunctionResult.fail,data:t,messageId:e.data.messageId},e.origin)},complete:()=>{postMessageToClient(u,{name:e.data.name,result:PPFunctionResult.complete,messageId:e.data.messageId},e.origin)}})}}else triggerFailCallback(u,e,MiniAppErrorType.sdkNotInitialized)}))}function init(e){const t=e.source,n=e.data.params;n.env||(n.env=PPEnv.production),saveEnv(n.env);const a=extractOttFromParams(n);if(shouldRemoveOTTFromQueryParams(n)){getClientFunctions().removeQueryParametersFromUrl(OTT_QUERY_PARAMETERS)}a||n.refreshToken||isClientAuthorized()?pp.init({...n,success:n=>{var a;postMessageToClient(t,{name:PPFunctionName.init,result:PPFunctionResult.success,data:n,messageId:e.data.messageId},e.origin,null==(a=e.data)?void 0:a.params)},fail:n=>{var a;postMessageToClient(t,{name:PPFunctionName.init,result:PPFunctionResult.fail,data:n,messageId:e.data.messageId},e.origin,null==(a=e.data)?void 0:a.params)},complete:()=>{var n;postMessageToClient(t,{name:PPFunctionName.init,result:PPFunctionResult.complete,messageId:e.data.messageId},e.origin,null==(n=e.data)?void 0:n.params)}}):triggerFailCallback(t,e,MiniAppErrorType.sdkNotInitialized)}function render(e){const t=e.source,n=e.data.params;if(isClientAuthorized()||(n.getDefault=!0),n.orderInfo&&"pay"===n.type){if(checkIfSdkUpgradeNeededForRemittance(n.orderInfo.orderType)){const n={errorCode:MiniAppErrorType.sdkUpgradeRequired};return postMessageToClient(t,{name:PPFunctionName.render,result:PPFunctionResult.fail,data:n,messageId:e.data.messageId},e.origin),void postMessageToClient(t,{name:PPFunctionName.render,result:PPFunctionResult.complete,messageId:e.data.messageId},e.origin)}if(!isValidOrderInfo(n.orderInfo)){const n={errorCode:MiniAppErrorType.badRequest};return postMessageToClient(t,{name:PPFunctionName.render,result:PPFunctionResult.fail,data:n,messageId:e.data.messageId},e.origin),void postMessageToClient(t,{name:PPFunctionName.render,result:PPFunctionResult.complete,messageId:e.data.messageId},e.origin)}}getRenderButtonInfo({...n}).then((a=>{postMessageToClient(t,{name:PPFunctionName.render,result:PPFunctionResult.success,data:{type:"pay"===n.type?"pay":"login",...a,renderId:n.renderId},messageId:e.data.messageId},e.origin)})).catch((a=>{console.error(a),postMessageToClient(t,{name:PPFunctionName.render,result:PPFunctionResult.fail,data:{type:"pay"===n.type?"pay":"login",renderId:n.renderId,errorCode:a instanceof PPError?a.errorCode:MiniAppErrorType.unknown},messageId:e.data.messageId},e.origin)})).finally((()=>{postMessageToClient(t,{name:PPFunctionName.render,result:PPFunctionResult.complete,data:{renderId:n.renderId},messageId:e.data.messageId},e.origin)}))}function logout(e){const t=e.source;pp.logout({success:n=>{postMessageToClient(t,{name:PPFunctionName.logout,result:PPFunctionResult.success,data:n,messageId:e.data.messageId},e.origin)},fail:n=>{postMessageToClient(t,{name:PPFunctionName.logout,result:PPFunctionResult.fail,data:n,messageId:e.data.messageId},e.origin)},complete:()=>{postMessageToClient(t,{name:PPFunctionName.logout,result:PPFunctionResult.complete,messageId:e.data.messageId},e.origin)}})}const INIT_RESULT_CODE_TO_EVENT_LABEL_MAP={[InitStatusCode.initialized]:"INITIALIZED",[InitStatusCode.tokenValid]:"TOKEN_VALID"};function postMessageToClient(e,t,n,a){const r={params:["pp.".concat(t.name),t.result,t.data]};handleDebugInfoTransfer(t.name,r,a);const o="fail"===t.result?t.data.errorCode:void 0;let i;t.name===PPFunctionName.init&&t.result===PPFunctionResult.success&&(i=INIT_RESULT_CODE_TO_EVENT_LABEL_MAP[t.data.statusCode]),handleLogSDKEvent(t.name,t.result,o,a,{event_label:i}),e.postMessage(JSON.parse(JSON.stringify(t)),n)}function handleDebugInfoTransfer(e,t,n){e===PPFunctionName.init?sendDebugInfoToClient(t,null==n?void 0:n.env,null==n?void 0:n.debugMode):sendDebugInfoToClient(t)}initCore();export{ActionSheet as A,resendEmail as B,getUserProfileData as C,Divider as D,ErrorSheet as E,FontSizeProvider as F,initAppConfiguration as G,getInitKycPassport as H,MinVersion as I,getOtp as J,verifyOtp as K,LoadingIndicator as L,MiniAppStatusType as M,OverLay as O,PermissionName as P,_export_sfc as _,__vite_legacy_guard,PermissionStatus as a,PButton as b,checkPermission as c,topup as d,useAppDetail as e,closeApp as f,getEventCategory as g,getAppConfig as h,useGetHeightProperties as i,getAddressList as j,getBalanceInfoForTopupSheet as k,logSDKEvent as l,getUserGrantedPermission as m,useGetHeights as n,editAddress as o,ppFetch as p,postAddress as q,getAddressByZip as r,setSelectedAddress as s,translationShared as t,usePopStateHandler as u,deleteAddress as v,getUserLocationRequest as w,fetchAppDetail as x,getUserProfileDataV2 as y,registerEmail as z};
//# sourceMappingURL=iframe-D8IBfgYp.js.map
