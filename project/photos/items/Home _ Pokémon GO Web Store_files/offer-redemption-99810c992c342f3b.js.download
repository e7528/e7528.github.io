try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b6506d06-ec68-4724-b6bb-e9b2b28597f5",e._sentryDebugIdIdentifier="sentry-dbid-b6506d06-ec68-4724-b6bb-e9b2b28597f5")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28225,39226],{48094:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/offer-redemption",function(){return n(16749)}])},39226:function(e,t,n){"use strict";n.r(t),n.d(t,{WebstoreIcon:function(){return c}});var r=n(50858),s=n(55818),a=n(97768),i=n(24246),l=n(65218),o=n.n(l);n(27378),n(95440);var d=n(73393),c=function(e){var t=e.iconName,n=e.storedIconURL,l=e.nianticIconName,c=e.label,u=e.size,f=(0,a._)(e,["iconName","storedIconURL","nianticIconName","label","size"]),m={};u&&(m={width:u,height:u});var _=c?(0,i.jsx)("span",{className:"sr-only",children:c}):null;if(n)return(0,i.jsxs)("span",{className:"h-full w-full",style:m,children:[(0,i.jsx)("svg",{"data-src":"".concat(n),fill:"currentColor",className:"h-full w-full",style:m}),_]});if(l)return(0,i.jsxs)("span",{className:"h-full w-full",style:m,children:[(0,i.jsx)("svg",{"data-src":"".concat("https://storage.googleapis.com/nianticweb-anchor-icons/niantic/niantic-").concat(l,".svg"),fill:"currentColor",className:"h-full w-full",style:m}),_]});if(t){var p=o()(d.Z[t]);return(0,i.jsxs)("span",{className:"h-full w-full",style:m,children:[(0,i.jsx)(p,(0,s._)((0,r._)({},f),{className:"h-full w-full",style:m})),_]})}return null}},29662:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(24246),s=n(33321),a=n(79894),i=n.n(a),l=n(39226),o=n(40624),d=n(64246),c=n(51655),u=function(e){var t=e.path,n=e.backLabel,a=(0,s.$G)().t;return(0,r.jsx)(d.AN,{level:"tertiary",class:"hydrated",className:"back-to-store__button","data-testid":"button-back-to-store","data-ws-testid":c.z.COMPONENT.BACK_TO_STORE.BACK_TO_STORE_BUTTON,children:(0,r.jsxs)(i(),{href:t||"/",className:(0,o.Z)("anchor-button-link tertiary","text-h6","pl-4 pr-6 xs:pl-5 xs:pr-7 sm:pl-6 sm:pr-8"),"data-ws-testid":c.z.COMPONENT.BACK_TO_STORE.BACK_TO_STORE_LINK,children:[(0,r.jsx)("div",{className:"h-[16px] w-[16px]",children:(0,r.jsx)(l.WebstoreIcon,{iconName:"arrow-left"})}),(0,r.jsx)("p",{"data-ws-testid":c.z.COMPONENT.BACK_TO_STORE.BACK_TO_STORE_LABEL,children:n||a("common.back_to_store")})]})})}},30712:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r=n(24246),s=n(39147),a=function(e){var t=e.height,n=e.width,a=e.color;return(0,r.jsx)(s.gy,{ariaLabel:"tail-spin-loading",height:void 0===t?40:t,width:void 0===n?40:n,color:void 0===a?"#ED99C5":a,radius:"1",visible:!0})}},96530:function(e,t,n){"use strict";n.d(t,{u:function(){return m}});var r=n(53941),s=n(24246),a=n(33321),i=n(86677),l=n(40624),o=n(18381),d=n(26873),c=n(49559),u=n(51655),f=n(99130),m=function(e){(0,r._)(e);var t,n,m,_,p,E,h,N=(0,d.l)().user,v=(0,i.useRouter)().locale,x=(0,o.q)().common,T=(0,c.i)(),O=T.width,I=T.isMobile,R=(0,a.$G)().t;if(!N||!O)return null;var g=O<400,b=null==N?void 0:null===(n=N.playerInfo)||void 0===n?void 0:null===(t=n.level)||void 0===t?void 0:t.toLocaleString(v),y=null==N?void 0:null===(m=N.playerInfo)||void 0===m?void 0:m.team;return(0,s.jsxs)("div",{className:"user-snapshot","data-ws-testid":u.z.COMPONENT.USER_SNAPSHOT.CONTAINER,children:[(0,s.jsx)("h5",{className:(0,l.Z)("user-snapshot__username","text-center sm:mb-3 sm:text-left"),"data-testid":"label-user-snapshot-name","data-ws-testid":u.z.COMPONENT.USER_SNAPSHOT.USERNAME,children:null==N?void 0:null===(_=N.playerInfo)||void 0===_?void 0:_.displayName}),(null==x?void 0:null===(p=x.userConfig)||void 0===p?void 0:p.displayNianticId)&&!!(null===(E=N.playerInfo)||void 0===E?void 0:E.nianticId)&&(0,s.jsx)("h6",{className:"mb-2 text-center sm:mb-3 sm:text-left",children:"Niantic ID: ".concat(null===(h=N.playerInfo)||void 0===h?void 0:h.nianticId)}),(0,s.jsxs)("div",{className:(0,l.Z)(!g&&"flex flex-row flex-nowrap whitespace-nowrap",g&&"flex flex-col gap-y-1","items-center justify-center",I?"text-sm":"text-h6"),children:[(0,s.jsx)("span",{"data-testid":"label-user-snapshot-level","data-ws-testid":u.z.COMPONENT.USER_SNAPSHOT.LEVEL,className:"text-h6",children:R("common.level",{level:b})}),!g&&(0,s.jsx)("span",{className:"px-2",children:"|"}),y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{"data-testid":"label-user-snapshot-team","data-ws-testid":u.z.COMPONENT.USER_SNAPSHOT.TEAM,className:"text-h6",children:R(y)}),!g&&(0,s.jsx)("span",{className:"px-2",children:"|"})]}),(0,s.jsx)(f.M,{useMultilineDisplay:g||I,noMultilineGap:!0})]})]})}},16749:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return S},checkPasscodeValidity:function(){return y}});var r=n(51037),s=n(60053),a=n(85556),i=n(24246),l=n(33321),o=n(88038),d=n.n(o),c=n(86677),u=n(27378),f=n(8159),m=n(40624),_=n(78723),p=n(64246),E=n(14833),h=n(6220),N=n(18381),v=n(29662),x=n(30712),T=n(36382),O=n(26873),I=n(96530),R=n(14201),g=n(51655),b=n(80149),y=function(e){return!(e.length>128)&&!!/^[A-Za-z0-9-]+$/.test(e)&&!e.startsWith("-")},S=!0;t.default=function(e){var t,n,o,S,j,A,w,P,C=e.offerRedemptionConfig,D=e.initialPasscode,F=(0,l.$G)().t,G=(0,O.l)(),k=G.user,M=G.isLoadingUser,L=(0,T.AX)().redeemPasscode,U=(0,c.useRouter)(),z=(0,N.q)().common,q=!!(null==z?void 0:null===(n=z.pageConfig)||void 0===n?void 0:n.showGiftCardRedemptionUnavailableMessage),B=(0,R.V)({shouldRedirectHome:!1}).signInUrl,Z=(0,s._)((0,u.useState)(!1),2),K=Z[0],Q=Z[1],V=(0,s._)((0,u.useState)(!1),2),H=V[0],W=V[1],X=(0,u.useRef)(null),$=(0,u.useRef)(null);(0,u.useEffect)(function(){if(K){var e=setTimeout(function(){U.push("/")},5e3);return function(){e&&clearTimeout(e)}}},[K,U]);var J=(0,i.jsx)("p",{className:"text-body my-9 text-center sm:max-w-[840px]",children:(0,i.jsxs)(l.cC,{ns:"common",i18nKey:"offer_redemption.gift_card_sign_in_note",children:["Sign in with your Pok\xe9mon GO account to redeem offer or gift card codes. To redeem an offer or gift card code, you must be logged in to your Pok\xe9mon GO account. To create a game account, please download the app. If you have any questions, please refer to the\xa0",(0,i.jsx)("a",{href:(0,b.Q)(null===(o=C.offerRedemptionLinks)||void 0===o?void 0:o.codeRedemptionFaqLink,U.locale),rel:"noopener noreferrer",target:"_blank","data-testid":"link-code-redemption-faq","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGN_IN_NOTE_CODE_REDEMPTION,children:"Code Redemption FAQ"}),"or the\xa0",(0,i.jsx)("a",{href:(0,b.Q)(null===(S=C.offerRedemptionLinks)||void 0===S?void 0:S.giftCardFaqLink,U.locale),rel:"noopener noreferrer",target:"_blank","data-testid":"link-gift-card-faq","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGN_IN_NOTE_GIFT_CARD_REDEMPTION,children:"Pok\xe9mon GO Gift Card FAQ"}),"."]})}),Y=(0,i.jsx)("p",{className:"text-body mt-9 text-center sm:max-w-[840px]",children:(0,i.jsxs)(l.cC,{ns:"common",i18nKey:"offer_redemption.gift_card_sign_in_faq_note_updated",children:["Note that some offers are not available for redemption via this website. Only offers that list this site as a redemption option may be redeemed above. Please check the terms and conditions of your offer or gift card. By redeeming your gift card, you agree (or if you are under 18, your parent or guardian agrees) to the\xa0",(0,i.jsx)("a",{href:(0,b.Q)(null===(j=C.offerRedemptionLinks)||void 0===j?void 0:j.nianticTermsLink,U.locale),rel:"noopener noreferrer",target:"_blank","data-testid":"link-niantic-terms","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGN_IN_NOTE_NIANTIC_TERMS,children:"Niantic Terms of Service"}),"and the\xa0",(0,i.jsx)("a",{href:(0,b.Q)(null===(A=C.offerRedemptionLinks)||void 0===A?void 0:A.giftCardTermsLink,U.locale),rel:"noopener noreferrer",target:"_blank","data-testid":"link-gift-card-terms","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGN_IN_NOTE_GIFT_CARD_TERMS,children:"Gift Card Terms and Conditions"}),". If you have any questions, please refer to the\xa0",(0,i.jsx)("a",{href:(0,b.Q)(null===(w=C.offerRedemptionLinks)||void 0===w?void 0:w.codeRedemptionFaqLink,U.locale),rel:"noopener noreferrer",target:"_blank","data-testid":"link-code-redemption-faq","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGN_IN_NOTE_CODE_REDEMPTION,children:"Code Redemption FAQ"}),"or the\xa0",(0,i.jsx)("a",{href:(0,b.Q)(null===(P=C.offerRedemptionLinks)||void 0===P?void 0:P.giftCardFaqLink,U.locale),rel:"noopener noreferrer",target:"_blank","data-testid":"link-gift-card-faq","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGN_IN_NOTE_GIFT_CARD_REDEMPTION,children:"Pok\xe9mon GO Gift Card FAQ"}),"."]})}),ee=(t=(0,r._)(function(){var e,t,n,r,s,i,l,o,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,15,16,18]),W(!0),t=X.current,n=$.current,!t||!n)return[2];if(r=n.value.includes("-"),!(q&&r))return[3,2];return[4,null===(s=X.current)||void 0===s?void 0:s.setCustomValidity("unavailable")];case 1:return a.sent(),[2];case 2:return[4,t.addCustomValidity(F("offer_redemption.redeem_error_invalid"),function(e){return y(e.value)})];case 3:return a.sent(),[4,null==t?void 0:t.validate()];case 4:if(!a.sent())return[2];return[4,L(n.value)];case 5:return i=a.sent(),[4,null===(e=X.current)||void 0===e?void 0:e.setCustomValidity("")];case 6:switch(a.sent(),i){case h.vg.STATUS.STATUS_SUCCESS:return[3,7];case h.vg.STATUS.STATUS_ALREADY_REDEEMED:return[3,8];case h.vg.STATUS.STATUS_EXPIRED:return[3,10]}return[3,12];case 7:return Q(!0),(0,_.j)("WebstoreGetUserApi"),[3,14];case 8:return Q(!1),[4,null===(l=X.current)||void 0===l?void 0:l.setCustomValidity("alreadyRedeemed")];case 9:case 11:case 13:return a.sent(),[3,14];case 10:return Q(!1),[4,null===(o=X.current)||void 0===o?void 0:o.setCustomValidity("expired")];case 12:return Q(!1),[4,null===(d=X.current)||void 0===d?void 0:d.setCustomValidity("serverIssue")];case 14:return[3,18];case 15:return a.sent(),[3,18];case 16:return[4,U.replace(U.pathname,void 0,{shallow:!0})];case 17:return a.sent(),W(!1),[7];case 18:return[2]}})}),function(){return t.apply(this,arguments)});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d(),{children:(0,i.jsx)("title",{children:F("page_title.offer_redemption")})}),(0,i.jsx)("div",{className:(0,m.Z)(E.T.MAX_WIDTH,E.T.DEFAULT_INLINE_PADDING),"data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.BACK_TO_STORE_BUTTON,children:(0,i.jsx)(v.I,{})}),(0,i.jsx)("section",{className:(0,m.Z)(E.T.MAX_WIDTH,E.T.DEFAULT_INLINE_PADDING),"data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.REDEEM_SECTION,children:(0,i.jsxs)("div",{className:(0,m.Z)("flex min-w-0 flex-col items-center justify-center"),children:[(0,i.jsx)("h4",{className:(0,m.Z)("mt-6 text-center sm:mt-9","w-full truncate"),children:F("offer_redemption.heading")}),!!k&&(0,i.jsxs)("div",{className:(0,m.Z)("flex flex-col items-center justify-center","w-full"),"data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGNED_IN_CONTAINER,children:[(0,i.jsx)("section",{"data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.USER_SNAPSHOT_SECTION,className:"mt-10",children:(0,i.jsx)(I.u,{})}),(0,i.jsx)("section",{"data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.FORM_SECTION,className:"mt-10 w-full sm:max-w-[520px]",children:(0,i.jsxs)("form",{onSubmit:function(){},noValidate:!0,children:[(0,i.jsxs)(p._I,{ref:X,children:[(0,i.jsx)("label",{slot:"label",htmlFor:"promo-input",className:"text-h6 text-left",children:F("common.enter_passcode")}),(0,i.jsx)("input",{required:!0,type:"text",name:"promo-input",id:"promo-input",slot:"input",className:"w-full rounded-lg bg-transparent leading-5",autoComplete:"off","data-testid":"input-offer-redemption-code-value","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.PASSCODE_INPUT_FIELD,ref:$,defaultValue:D}),(0,i.jsxs)("button",{slot:"input-suffix",className:(0,m.Z)("bg-transparent text-sm","code-redemption font-bold uppercase","flex items-center"),onClick:function(e){e.preventDefault(),ee()},disabled:H||K,"data-testid":"button-offer-redemption-apply","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SUBMIT_BUTTON,children:[H&&(0,i.jsx)("div",{className:"pl-10",children:(0,i.jsx)(x.v,{height:20,width:20})}),!H&&K&&(0,i.jsx)("span",{className:"text-green-500",children:(0,i.jsx)(f.g,{iconName:"check",size:"1.5rem"})}),!H&&F("common.apply")]}),(0,i.jsx)("template",{slot:"error-already-redeemed",children:F("offer_redemption.already_redeemed")}),(0,i.jsx)("template",{slot:"error-invalid-passcode",children:F("offer_redemption.redeem_error_invalid")}),(0,i.jsx)("template",{slot:"error-server-issue",children:F("offer_redemption.redeem_error_invalid")}),(0,i.jsx)("template",{slot:"error-expired",children:F("offer_redemption.redeem_error_expired")}),(0,i.jsx)("template",{slot:"error-unavailable",children:F("offer_redemption.gift_card_unavailable")}),(0,i.jsx)("div",{slot:"error","data-testid":"label-offer-redemption-error-message","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.PASSCODE_ERROR_MESSAGE})]}),K&&(0,i.jsx)("div",{className:"flex flex-col gap-x-2",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(p.iL,{name:"check",className:"text-green-success mr-1 h-[18px] w-[18px]","aria-hidden":!0}),(0,i.jsx)("p",{className:"text-body text-green-success","data-testid":"label-offer-redemption-success-message","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.PASSCODE_SUCCESS_MESSAGE,children:F("offer_redemption.offer_redeemed")})]})})]})}),(0,i.jsx)("section",{children:Y})]}),!k&&(0,i.jsxs)("div",{"data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGNED_OUT_CONTAINER,className:"flex flex-col items-center justify-center",children:[J,(0,i.jsx)(p.AN,{level:"primary",disabled:M,children:(0,i.jsx)("a",{href:B,className:(0,m.Z)("anchor-button-link text-button",M&&"disabled"),"data-testid":"link-offer-redemption-signin","data-ws-testid":g.z.PAGE.OFFER_REDEMPTION.SIGNIN_LINK,children:F("offer_redemption.passcode_sign_in")})})]})]})})]})}},80149:function(e,t,n){"use strict";n.d(t,{Q:function(){return a}});var r=n(99978),s=n(34622),a=function(e,t){if(!t||(null==e?void 0:e.localesToIgnoreList)&&(null==e?void 0:e.localesToIgnoreList.includes(t)))return null==e?void 0:null===(c=e.url)||void 0===c?void 0:c.replace("{locale}",r.J.DEFAULT);var n,a=(null==e?void 0:e.preferredLocalesList)||[],i=!0,l=!1,o=void 0;try{for(var d,c,u,f=a[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var m,_=u.value;if((0,s.dA)(_)===(0,s.dA)(t))return null==e?void 0:null===(m=e.url)||void 0===m?void 0:m.replace("{locale}","".concat(_))}}catch(e){l=!0,o=e}finally{try{i||null==f.return||f.return()}finally{if(l)throw o}}var p=null==e?void 0:e.useLanguageCode,E=(null==e?void 0:e.useLanguageCodeExceptionsList)||[];return!p||(null==E?void 0:E.includes(t))?null==e?void 0:null===(d=e.url)||void 0===d?void 0:d.replace("{locale}","".concat(t)):null==e?void 0:null===(n=e.url)||void 0===n?void 0:n.replace("{locale}","".concat((0,s.dA)(t)))}}},function(e){e.O(0,[35099,46309,82909,92888,49774,40179],function(){return e(e.s=48094)}),_N_E=e.O()}]);