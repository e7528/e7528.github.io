try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="764a0444-42b5-4ba3-ae69-21fece4a57ec",e._sentryDebugIdIdentifier="sentry-dbid-764a0444-42b5-4ba3-ae69-21fece4a57ec")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35740,39226],{54623:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/purchase/item/[itemId]",function(){return s(42049)}])},50133:function(e,t,s){"use strict";s.d(t,{s:function(){return a}});var n=s(24246);s(27378);var i=s(8159),r=s(40624);s(78184);var a=function(e){var t,s=e.label,a=e.subLabel,l=e.extraContent,d=e.showArrow,o=e.isAccordionOpen,c=void 0!==o&&o,u=e.toggleAccordion,m=e.horizontalAlign,f=void 0===m?"center":m,x=e.iconPosition,p=void 0===x?"absolute-right":x,h=e.testid,E=e.children;if(t="left"===f?"justify-start":"right"===f?"justify-end":"justify-center",!(void 0===d||d))return(0,n.jsxs)("div",{"data-testid":h,"data-ws-testid":h,className:(0,r.Z)("flex flex-col","center"===f&&"items-center"),children:[(0,n.jsx)("div",{className:"text-h6",children:s}),a&&(0,n.jsx)("div",{className:"mt-1",children:a}),l,E]});var N="center"===f&&"inline"===p;return(0,n.jsxs)("button",{type:"button",onClick:u,"aria-expanded":c?"true":"false",className:(0,r.Z)("relative w-full border-0 bg-transparent p-0",N&&"text-center",!N&&"pr-8"),"data-testid":h,"data-ws-testid":h,children:["inline"===p?(0,n.jsxs)("div",{className:(0,r.Z)("items-center gap-1","center"===f?"inline-flex":(0,r.Z)("flex w-full",t)),children:[(0,n.jsx)("span",{className:"text-h6",children:s}),(0,n.jsx)("span",{className:(0,r.Z)("h-5 w-5 flex-shrink-0 ml-2",c&&"accordion__chevron-icon--open"),children:(0,n.jsx)(i.g,{iconName:c?"chevron-up":"chevron-down"})})]}):(0,n.jsxs)("div",{className:(0,r.Z)("flex w-full items-center",t),children:[(0,n.jsx)("div",{className:"text-h6 text-left",children:s}),(0,n.jsx)("div",{className:(0,r.Z)("absolute right-2 top-1/2 h-5 w-5 -translate-y-1/2",c&&"accordion__chevron-icon--open"),children:(0,n.jsx)(i.g,{iconName:c?"chevron-up":"chevron-down"})})]}),a&&(0,n.jsx)("div",{className:(0,r.Z)("mt-1","center"===f&&"text-center","right"===f&&"text-right"),children:a}),l]})}},39226:function(e,t,s){"use strict";s.r(t),s.d(t,{WebstoreIcon:function(){return c}});var n=s(50858),i=s(55818),r=s(97768),a=s(24246),l=s(65218),d=s.n(l);s(27378),s(95440);var o=s(73393),c=function(e){var t=e.iconName,s=e.storedIconURL,l=e.nianticIconName,c=e.label,u=e.size,m=(0,r._)(e,["iconName","storedIconURL","nianticIconName","label","size"]),f={};u&&(f={width:u,height:u});var x=c?(0,a.jsx)("span",{className:"sr-only",children:c}):null;if(s)return(0,a.jsxs)("span",{className:"h-full w-full",style:f,children:[(0,a.jsx)("svg",{"data-src":"".concat(s),fill:"currentColor",className:"h-full w-full",style:f}),x]});if(l)return(0,a.jsxs)("span",{className:"h-full w-full",style:f,children:[(0,a.jsx)("svg",{"data-src":"".concat("https://storage.googleapis.com/nianticweb-anchor-icons/niantic/niantic-").concat(l,".svg"),fill:"currentColor",className:"h-full w-full",style:f}),x]});if(t){var p=d()(o.Z[t]);return(0,a.jsxs)("span",{className:"h-full w-full",style:f,children:[(0,a.jsx)(p,(0,i._)((0,n._)({},m),{className:"h-full w-full",style:f})),x]})}return null}},20988:function(e,t,s){"use strict";s.d(t,{E:function(){return f}});var n=s(24246),i=s(33321),r=s(38579),a=s.n(r),l=s(86677),d=s(38989),o=s(64246),c=s(50349),u=s(51655),m=s(27386),f=function(e){var t,s=e.onClose,r=(0,m.s)().rewardTierData,f=(0,i.$G)().t,x=(0,l.useRouter)(),p="",h="",E=null==r?void 0:null===(t=r.rewardTierList)||void 0===t?void 0:t.endTimeMs,N=E&&0!==E;if(N){var v=new Date(E),_=x.locale;p=v.toLocaleDateString(_,{day:"numeric",month:"long"}),h=v.toLocaleTimeString(_,{hour:"numeric",minute:"numeric",hour12:!0})}var w=(0,n.jsx)(a(),{slot:"media-background",src:"".concat(c.T.GAME_SITE_ASSETS,"reward-road-info-image.jpg"),alt:"rewarded spend info dialog image","data-ws-testid":u.z.COMPONENT.REWARDED_SPEND.INFO_DIALOG.BANNER,width:560,height:315,className:"w-full"});return(0,n.jsxs)(d.j,{isOpen:!0,showCloseIcon:!0,onClose:s,children:[w,(0,n.jsxs)("div",{className:"flex-grow overflow-auto",children:[(0,n.jsx)("h5",{className:"rewarded-spend-info-dialog px-6 pt-6","data-ws-testid":u.z.COMPONENT.REWARDED_SPEND.INFO_DIALOG.TITLE,children:f("rewarded_spend.info_dialog_title")}),(0,n.jsxs)("div",{"data-ws-testid":u.z.COMPONENT.REWARDED_SPEND.INFO_DIALOG.BODY,className:"px-6",children:[N&&(0,n.jsx)("p",{className:"rewarded-spend-info-dialog__body",children:f("rewarded_spend.rewarded_spend_information_message_timer",{date:p,time:h})}),(0,n.jsx)("p",{className:"rewarded-spend-info-dialog__body",children:f("rewarded_spend.rewarded_spend_information_message_intro")}),(0,n.jsxs)("ol",{className:"rewarded-spend-info-dialog__list ml-8",children:[(0,n.jsx)("li",{className:"pl-1",children:f("rewarded_spend.rewarded_spend_information_message_bullet1")}),(0,n.jsx)("li",{className:"pl-1",children:f("rewarded_spend.rewarded_spend_information_message_bullet2")}),(0,n.jsx)("li",{className:"pl-1",children:f("rewarded_spend.rewarded_spend_information_message_bullet3")})]}),(0,n.jsx)("p",{className:"rewarded-spend-info-dialog__asterisk",children:f("rewarded_spend.rewarded_spend_information_message_asterisks1")}),(0,n.jsx)("p",{className:"rewarded-spend-info-dialog__asterisk",children:f("rewarded_spend.rewarded_spend_information_message_asterisks2")}),(0,n.jsx)("p",{className:"rewarded-spend-info-dialog__body",children:f("rewarded_spend.rewarded_spend_information_message_body1")}),(0,n.jsx)("p",{className:"rewarded-spend-info-dialog__body",children:f("rewarded_spend.rewarded_spend_information_message_body2")}),(0,n.jsx)("p",{className:"rewarded-spend-info-dialog__asterisk",children:f("rewarded_spend.rewarded_spend_information_message_asterisks3")}),(0,n.jsx)("div",{className:"rewarded-spend-info-dialog__button-container",children:(0,n.jsx)(o.AN,{onClick:s,className:"w-[35%]",children:(0,n.jsx)("p",{className:"rewarded-spend-info-dialog__close-button","data-ws-testid":u.z.COMPONENT.REWARDED_SPEND.INFO_DIALOG.CLOSE_BUTTON,children:f("common.close")})})})]})]})]})}},70292:function(e,t,s){"use strict";s.d(t,{j:function(){return c}});var n=s(60053),i=s(24246),r=s(86677),a=s(27378),l=s(40624),d=s(64246),o=s(51655),c=function(e){var t=e.children,s=e.alignLabel,c=e.testid,u=e.label,m=e.labelTestid,f=e.forceOpen,x=(0,r.useRouter)().query,p=(0,n._)((0,a.useState)(void 0!==f&&f),2),h=p[0],E=p[1],N=(0,a.useId)();return(0,a.useEffect)(function(){(null==x?void 0:x.openContent)&&E(!0)},[null==x?void 0:x.openContent]),(0,i.jsxs)("div",{className:(0,l.Z)("w-full min-w-0","flex flex-col",null!=s?s:"items-center","accordion"),children:[(0,i.jsxs)(d.AN,{level:"tertiary",className:"plain flex cursor-pointer gap-3","data-testid":c,"data-ws-testid":c,onClick:function(){return E(function(e){return!e})},"aria-expanded":h?"true":"false",children:[(0,i.jsx)("p",{"data-testid":m,"data-ws-testid":m,id:N,className:"whitespace-break-spaces break-words",children:u}),(0,i.jsx)(d.iL,{class:"hydrated",name:"chevron-down",className:(0,l.Z)("h-5 w-5 flex-shrink-0","accordion__chevron-icon",h&&"accordion__chevron-icon--open")})]}),(0,i.jsx)("div",{"aria-labelledby":N,"data-testid":"wui-accordion-children-container","data-ws-testid":o.z.COMPONENT.ACCORDION.CHILDREN_CONTAINER,className:(0,l.Z)("w-full","accordion__container",!h&&"accordion__container--closed"),children:t})]})}},29662:function(e,t,s){"use strict";s.d(t,{I:function(){return u}});var n=s(24246),i=s(33321),r=s(79894),a=s.n(r),l=s(39226),d=s(40624),o=s(64246),c=s(51655),u=function(e){var t=e.path,s=e.backLabel,r=(0,i.$G)().t;return(0,n.jsx)(o.AN,{level:"tertiary",class:"hydrated",className:"back-to-store__button","data-testid":"button-back-to-store","data-ws-testid":c.z.COMPONENT.BACK_TO_STORE.BACK_TO_STORE_BUTTON,children:(0,n.jsxs)(a(),{href:t||"/",className:(0,d.Z)("anchor-button-link tertiary","text-h6","pl-4 pr-6 xs:pl-5 xs:pr-7 sm:pl-6 sm:pr-8"),"data-ws-testid":c.z.COMPONENT.BACK_TO_STORE.BACK_TO_STORE_LINK,children:[(0,n.jsx)("div",{className:"h-[16px] w-[16px]",children:(0,n.jsx)(l.WebstoreIcon,{iconName:"arrow-left"})}),(0,n.jsx)("p",{"data-ws-testid":c.z.COMPONENT.BACK_TO_STORE.BACK_TO_STORE_LABEL,children:s||r("common.back_to_store")})]})})}},30712:function(e,t,s){"use strict";s.d(t,{v:function(){return r}});var n=s(24246),i=s(39147),r=function(e){var t=e.height,s=e.width,r=e.color;return(0,n.jsx)(i.gy,{ariaLabel:"tail-spin-loading",height:void 0===t?40:t,width:void 0===s?40:s,color:void 0===r?"#ED99C5":r,radius:"1",visible:!0})}},99372:function(e,t,s){"use strict";s.d(t,{K:function(){return p}});var n=s(51037),i=s(60053),r=s(85556),a=s(86677),l=s(27378),d=s(63432),o=s(53815),c=s(4176),u=s(6220),m=s(18381),f=s(36382),x=s(74395),p=function(){var e,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=s.setIsRedirecting,h=s.ignoreUseEffects,E=void 0!==h&&h,N=(0,a.useRouter)(),v=(0,o.kY)().mutate,_=(0,f.AX)(),w=_.item,R=_.purchase,O=_.cleanUpContext,j=_.cleanUpPromoCode,C=_.singleItemPurchaseToken,T=_.xsollaWidget,A=(0,m.q)().envSpecific,g=(0,i._)((0,l.useState)(""),2),b=g[0],I=g[1],y=(0,i._)((0,l.useState)(""),2),S=y[0],P=y[1],L=(0,i._)((0,l.useState)(!1),2),D=L[0],k=L[1],M=(0,l.useCallback)(function(e,t){var s;if(null==t?void 0:null===(s=t.paymentInfo)||void 0===s?void 0:s.status)switch(t.paymentInfo.status){case"delivering":I("delivering");break;case"done":I("done"),P(t.paymentInfo.invoice)}},[]),U=(0,l.useCallback)(function(){switch(b){case"delivering":j(),N.push(c.j.ACCOUNT_PROFILE);break;case"done":j(),S&&(v("WebstoreGetUserApi"),null==p||p(!0),N.push({pathname:c.j.ORDER_CONFIRMATION,query:{invoice_id:S,transaction_id:S}}),O(!1))}},[j,O,v,N,S,b,p]);(0,l.useEffect)(function(){if(!E)return T&&window.addEventListener("close",U),function(){T&&window.removeEventListener("close",U)}},[T,U,E]),(0,l.useEffect)(function(){if(!E)return T&&T.on("status",M),function(){T&&T.off()}},[T,M,E]),(0,l.useEffect)(function(){if(!E&&(null==C?void 0:C.length)>0&&T){var e;T.init({access_token:C,sandbox:!!(null==A?void 0:null===(e=A.xsollaConfig)||void 0===e?void 0:e.sandbox),iframeOnly:!0,childWindow:{target:"_self"}}),T.open()}},[C,T,A,E]);var z=(e=(0,n._)(function(){var e,t,s=arguments;return(0,r.Jh)(this,function(n){switch(n.label){case 0:if(e=s.length>0&&void 0!==s[0]?s[0]:"",!w)throw Error("[useXsollaPayment:handleOrderConfirm] No item found.");if((null==w?void 0:w.state)!==u.F2.ITEM_STATE.PURCHASABLE)return[2];if(k(!0),(0,x.F)(d.Vendor.SBPS,A))return N.push({pathname:"/purchase/item/".concat(w.skuId,"/sbps-payment")}),[2];return[4,V()];case 1:if(!(t=n.sent()))throw Error("Xsolla Payment: Failed to retrieve paystation token");return[4,R(t,e)];case 2:return n.sent(),v("WebstoreGetUserApi"),k(!1),[2]}})}),function(){return e.apply(this,arguments)}),V=(t=(0,n._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:return[4,fetch("/api/auth/paystation-token")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent().token]}})}),function(){return t.apply(this,arguments)});return{loading:D,handleOrderConfirm:z,refreshPaystationToken:V}}},96530:function(e,t,s){"use strict";s.d(t,{u:function(){return f}});var n=s(53941),i=s(24246),r=s(33321),a=s(86677),l=s(40624),d=s(18381),o=s(26873),c=s(49559),u=s(51655),m=s(99130),f=function(e){(0,n._)(e);var t,s,f,x,p,h,E,N=(0,o.l)().user,v=(0,a.useRouter)().locale,_=(0,d.q)().common,w=(0,c.i)(),R=w.width,O=w.isMobile,j=(0,r.$G)().t;if(!N||!R)return null;var C=R<400,T=null==N?void 0:null===(s=N.playerInfo)||void 0===s?void 0:null===(t=s.level)||void 0===t?void 0:t.toLocaleString(v),A=null==N?void 0:null===(f=N.playerInfo)||void 0===f?void 0:f.team;return(0,i.jsxs)("div",{className:"user-snapshot","data-ws-testid":u.z.COMPONENT.USER_SNAPSHOT.CONTAINER,children:[(0,i.jsx)("h5",{className:(0,l.Z)("user-snapshot__username","text-center sm:mb-3 sm:text-left"),"data-testid":"label-user-snapshot-name","data-ws-testid":u.z.COMPONENT.USER_SNAPSHOT.USERNAME,children:null==N?void 0:null===(x=N.playerInfo)||void 0===x?void 0:x.displayName}),(null==_?void 0:null===(p=_.userConfig)||void 0===p?void 0:p.displayNianticId)&&!!(null===(h=N.playerInfo)||void 0===h?void 0:h.nianticId)&&(0,i.jsx)("h6",{className:"mb-2 text-center sm:mb-3 sm:text-left",children:"Niantic ID: ".concat(null===(E=N.playerInfo)||void 0===E?void 0:E.nianticId)}),(0,i.jsxs)("div",{className:(0,l.Z)(!C&&"flex flex-row flex-nowrap whitespace-nowrap",C&&"flex flex-col gap-y-1","items-center justify-center",O?"text-sm":"text-h6"),children:[(0,i.jsx)("span",{"data-testid":"label-user-snapshot-level","data-ws-testid":u.z.COMPONENT.USER_SNAPSHOT.LEVEL,className:"text-h6",children:j("common.level",{level:T})}),!C&&(0,i.jsx)("span",{className:"px-2",children:"|"}),A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{"data-testid":"label-user-snapshot-team","data-ws-testid":u.z.COMPONENT.USER_SNAPSHOT.TEAM,className:"text-h6",children:j(A)}),!C&&(0,i.jsx)("span",{className:"px-2",children:"|"})]}),(0,i.jsx)(m.M,{useMultilineDisplay:C||O,noMultilineGap:!0})]})]})}},42049:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return ef},default:function(){return ex}});var n=s(51037),i=s(60053),r=s(85556),a=s(24246),l=s(33321),d=s(65218),o=s.n(d),c=s(88038),u=s.n(c),m=s(27378),f=s(8159),x=s(40624),p=s(53815),h=s(64246),E=s(14833),N=s(18180),v=s(6220),_=s(55748),w=s(45416),R=s(18381),O=s(29662),j=s(30712),C=s(82900),T=function e(){(0,C._)(this,e)};T.CHECKOUT_CONTAINER="fsc-embedded-checkout-container",T.SCRIPT_ID="fsc-api";var A=s(49559),g=s(86677),b=s(51655),I=(0,m.createContext)(null),y=function(e){var t=e.children,s=(0,i._)((0,m.useState)(!1),2),n=s[0],r=s[1],l=(0,i._)((0,m.useState)(!0),2),d=l[0],o=l[1];return(0,a.jsx)(I.Provider,{value:{showFastSpringError:n,setShowFastSpringError:r,showFastSpringLoader:d,setShowFastSpringLoader:o},children:t})};function S(){var e=(0,m.useContext)(I);if(!e)throw Error("[Critical]: useFastSpringStateContext must be used within a FastSpringStateProvider");return e}var P=function(){var e,t=(0,l.$G)().t,s=S().setShowFastSpringError,i=(0,g.useRouter)(),d=(e=(0,n._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:return[4,i.replace(i.asPath)];case 1:return e.sent(),s(!1),[2]}})}),function(){return e.apply(this,arguments)});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,x.Z)(E.T.MAX_WIDTH,"mx-auto mt-2 pl-2"),children:(0,a.jsx)(O.I,{})}),(0,a.jsxs)("div",{className:"mt-10 flex flex-col items-center justify-center gap-y-5 p-5","data-ws-testid":b.z.COMPONENT.LAYOUT.PAYMENT_CHECKOUT_ERROR,children:[(0,a.jsx)("div",{className:"text-red-700",children:(0,a.jsx)(f.g,{iconName:"octagon-alert",size:"3rem"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-3 text-center",children:[(0,a.jsx)("h5",{children:t("common.payment_checkout_load_error")}),(0,a.jsx)("p",{children:t("common.payment_checkout_load_error_description")})]}),(0,a.jsx)(h.AN,{level:"primary",className:"mt-5",onClick:function(){d()},children:t("common.server_error_try_again")})]})]})},L=s(38579),D=s.n(L),k=s(50133),M=s(99978),U=s(88895),z=s(20988),V=s(27386),W=s(26873),B=function(e){var t,s,n=e.item,r=(0,A.i)().isMobile,l=(0,i._)((0,m.useState)(!1),2),d=l[0],o=l[1],c=(0,V.s)().isRewardedSpendSupported,u=(0,W.l)().user,f=(0,g.useRouter)().locale,p=(0,i._)((0,m.useState)(!0),2),h=p[0],E=p[1],N=(0,_.g)().skuDisplay,v=n.skuId!==U.j.GO_FEST_2025_TEST?null==N?void 0:N.displayRewardedSpendPoints(n,f||M.J.DEFAULT,function(){return o(!0)},!0,!0,r?"1.2rem":"1.4rem"):null,R=!!(null==n?void 0:null===(t=n.bundledCurrencyList)||void 0===t?void 0:t.at(0))&&!(null==n?void 0:null===(s=n.bundledItemList)||void 0===s?void 0:s.at(0)),O=null==N?void 0:N.displaySkuName(n),j=!R&&(null==N?void 0:N.displayBundledItems(n,u));return(0,a.jsxs)(a.Fragment,{children:[c&&d&&(0,a.jsx)(z.E,{onClose:function(){return o(!1)}}),(0,a.jsx)("div",{className:(0,x.Z)("review-order",b.z.COMPONENT.REVIEW_ORDER_CARD.CONTENT_CONTAINER,"max-w-[800px]","flex flex-grow flex-col justify-between","rounded-3xl border p-6"),"data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.CONTENT_CONTAINER,children:r?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center gap-x-2",children:[(0,a.jsx)(D(),{src:w.R.getSkuImageUrl(n),priority:!0,alt:"string"==typeof O?O:n.skuId,width:60,height:60}),j?(0,a.jsx)("div",{className:"accordion flex flex-col items-start",children:(0,a.jsx)(k.s,{label:O,isAccordionOpen:h,toggleAccordion:function(){E(function(e){return!e})},horizontalAlign:"center",iconPosition:"inline"})}):(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-h6","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.SKU_NAME,children:O})})]}),j&&h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{className:"w-full border-t"}),(0,a.jsxs)("div",{className:"px-0",children:[j,c&&v]})]}),!j&&c&&v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{className:"w-full border-t"}),(0,a.jsx)("div",{className:"min-w-[340px] items-center px-4 pt-4",children:v})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D(),{src:w.R.getSkuImageUrl(n),priority:!0,className:"justify-start self-center",alt:"string"==typeof O?O:n.skuId,width:j?150:280,height:j?150:280}),(0,a.jsx)("div",{className:"flex flex-1 flex-col justify-center",children:(0,a.jsx)("div",{className:"flex flex-col items-center pb-3",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-h5 text-center","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.SKU_NAME,children:O}),(0,a.jsxs)("div",{className:"mt-4 min-w-[350px] items-center",children:[j,c&&v]})]})})})]})})]})},F=s(34622),G=s(97707),K=s(4176),H=function(e){var t,s=e.fastSpringSecureKey,i=e.fastSpringSecurePayload,a=(0,R.q)().envSpecific,l=(0,m.useRef)(!1),d=(0,g.useRouter)(),o=d.locale,c=d.push,u=S(),f=u.setShowFastSpringError,x=u.showFastSpringError,h=u.setShowFastSpringLoader,E=(0,p.kY)().mutate;(0,m.useEffect)(function(){var e;(null===(e=window.fastspring)||void 0===e?void 0:e.builder)&&window.fastspring.builder.language((0,F.dA)(o||M.J.DEFAULT))},[o]);var N=function(){delete window.fastspring,delete window.dataPopupWebhookReceived,delete window.fastSpringSecureCallback,delete window.fastSpringSecureCallback};(0,m.useEffect)(function(){if(!x)return s&&i||O(),v(),function(){N()}},[x]);var v=function(){if(!l.current){if(!document.getElementById(T.CHECKOUT_CONTAINER))throw Error("[useFastSpringPayment:loadStoreBuilderLibrary] fast spring checkout container not found");var e,t,n=document.getElementById(T.SCRIPT_ID);n&&n.remove(),l.current=!0,(n=document.createElement("script")).type="text/javascript",n.id=T.SCRIPT_ID,n.setAttribute("data-ws-testid",b.z.COMPONENT.FASTSPRING.SCRIPT),n.src="https://sbl.onfastspring.com/sbl/1.0.5/fastspring-builder.min.js",n.dataset.storefront=null==a?void 0:null===(e=a.fastSpringConfig)||void 0===e?void 0:e.storeFrontId,n.setAttribute("data-access-key",null==a?void 0:null===(t=a.fastSpringConfig)||void 0===t?void 0:t.dataAccessKey),n.setAttribute("data-popup-webhook-received","dataPopupWebhookReceived"),n.setAttribute("data-embedded-prevent-automatic-checkout-call","true"),n.setAttribute("data-error-callback","dataErrorCallback"),document.body.appendChild(n),window.fastSpringSecureCallback=_,window.dataErrorCallback=w,n.onload=function(){var e;if(!(null===(e=window.fastspring)||void 0===e?void 0:e.builder)||!i||!s){O();return}window.fastspring.builder.language((0,F.dA)(o||M.J.DEFAULT)),window.fastspring.builder.secure(i,s,_),window.dataPopupWebhookReceived=j,h(!1)},n.onerror=function(){O()}}},_=function(){var e;(null===(e=window.fastspring)||void 0===e?void 0:e.builder)&&window.fastspring.builder.checkout()},w=function(){G.uT("FastSpring error callback trigerred","error"),O()},O=function(){f(!0),l.current=!1},j=(t=(0,n._)(function(e){var t;return(0,r.Jh)(this,function(s){switch(s.label){case 0:if(!(null==e?void 0:null===(t=e.tags)||void 0===t?void 0:t.orderId))throw Error("[useFastSpringPayment:dataPopupWebhookReceived] order id not found.");return N(),h(!0),[4,new Promise(function(e){return setTimeout(e,2e3)})];case 1:return s.sent(),[4,E("WebstoreGetUserApi")];case 2:return s.sent(),c({pathname:K.j.ORDER_CONFIRMATION,query:{order_id:e.tags.orderId}}),[2]}})}),function(e){return t.apply(this,arguments)})},Z=function(e){var t=e.item,s=e.rewardedSpendMonthlyEndTime,n=e.fastSpringSecureKey,i=e.fastSpringSecurePayload,r=e.headerWithUserSnapshot,l=(0,A.i)(),d=l.isMobile,o=l.isTablet,c=S(),u=c.showFastSpringLoader,f=c.showFastSpringError;return(H({fastSpringSecureKey:n,fastSpringSecurePayload:i}),(0,m.useEffect)(function(){u&&window.scrollTo(0,0)},[u]),f)?(0,a.jsx)(P,{}):(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsx)(j.v,{})}),(0,a.jsxs)("div",{className:(0,x.Z)(u&&"hidden"),children:[r,(0,a.jsxs)("div",{className:(0,x.Z)("flex items-center justify-center p-8","mx-auto max-w-[1400px]",(d||o)&&"flex-col items-center"),children:[(0,a.jsx)(B,{item:t,rewardedSpendMonthlyEndTime:s}),(0,a.jsx)("div",{id:T.CHECKOUT_CONTAINER,"data-ws-testid":b.z.COMPONENT.FASTSPRING.CHECKOUT_CONTAINER})]})]})]})},J=s(69754),Y=s(21603),q=s(74466),X=s(36382),$=function(e){var t,s,n,i=e.sku,r=(0,g.useRouter)().locale,l=(0,X.AX)(),d=l.promoCodeDetails,o=l.promoCodeState,c=null==i?void 0:null===(s=i.priceList)||void 0===s?void 0:s.at(0);if(!i||!c)return null;var u=(0,J.hE)(c.currency,c.priceE6,r,null==d?void 0:null===(n=d.discount)||void 0===n?void 0:n.percent),m=(0,a.jsx)("p",{"data-testid":"label-order-review-price","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_PRICE.PRICE,children:u}),f=w.R.isCoinPricedSku(i),x=f&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y.U,{}),m]});return(0,a.jsxs)("div",{className:"text-h6 flex flex-row self-center whitespace-pre sm:self-start","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_PRICE.CONTAINER,children:[(t=(0,q.H)(c,d,o,r))&&(0,a.jsx)("p",{className:"strikethrough mr-2 flex flex-row opacity-30","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_PRICE.ORIGINAL_PRICE,children:t}),x,!f&&m]})},Q=function(e){var t,s,n,r=e.item,d=(0,l.$G)().t,o=(0,A.i)().isMobile,c=(0,g.useRouter)(),u=c.query,f=c.locale,p=(0,i._)((0,m.useState)(!1),2),h=p[0],E=p[1],N=(0,i._)((0,m.useState)(!0),2),R=N[0],O=N[1];(0,m.useEffect)(function(){(null==u?void 0:u.openContent)&&O(!0)},[null==u?void 0:u.openContent]);var j=(0,V.s)().isRewardedSpendSupported,C=(0,W.l)().user,T=(0,X.AX)(),I=T.cleanUpPromoCode,y=T.promoCodeDetails,S=T.promoCodeState,P=(0,_.g)().skuDisplay,L=r.skuId!==U.j.GO_FEST_2025_TEST?null==P?void 0:P.displayRewardedSpendPoints(r,f||M.J.DEFAULT,function(){return E(!0)},!0):null,B=!!(null==r?void 0:null===(s=r.bundledCurrencyList)||void 0===s?void 0:s.at(0))&&!(null==r?void 0:null===(n=r.bundledItemList)||void 0===n?void 0:n.at(0)),F=null==y?void 0:y.bonusItem,G=null==y?void 0:y.code,K=null==P?void 0:P.displaySkuName(r),H=!B&&(null==P?void 0:P.displayBundledItems(r,C,void 0,function(){E(!0)})),Z=(null==y?void 0:y.discount)&&G&&d("common.promo_code_percent_off",{code:G,percent:null==y?void 0:y.discount.percent.toString()}),J=F&&G&&(null==F?void 0:F.state)===v.F2.ITEM_STATE.PURCHASABLE&&(0,a.jsxs)(l.cC,{ns:"common",i18nKey:"order_review.promotion_detail",children:[G," applied",null==P?void 0:P.displaySkuName(y.bonusItem)]}),Y=function(){var e,t;return S!==v.u3.XSOLLA_PROMOCODE_STATUS.VALID?null:(t=(null==y?void 0:null===(e=y.discount)||void 0===e?void 0:e.percent)?Z:F&&(null==F?void 0:F.state)===v.F2.ITEM_STATE.PURCHASABLE?J:null)&&(0,a.jsxs)("div",{className:"flex","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.PROMOTION_DETAIL_CONTAINER,children:[(0,a.jsx)("p",{children:t}),(0,a.jsx)("button",{className:"text-body pl-2 underline","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.PROMOTION_DETAIL_REMOVE_BUTTON,onClick:I,children:d("common.remove")})]})},q=(0,x.Z)("review-order",b.z.COMPONENT.REVIEW_ORDER_CARD.CONTENT_CONTAINER,"flex flex-col sm:flex-row sm:items-center sm:justify-center max-w-[1056px] rounded-3xl border px-3 py-6 sm:mt-12 sm:px-7 mx-auto mt-8");return(0,a.jsxs)(a.Fragment,{children:[j&&h&&(0,a.jsx)(z.E,{onClose:function(){return E(!1)}}),(0,a.jsxs)("div",{className:q,"data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.CONTENT_CONTAINER,children:[!o&&(0,a.jsx)(D(),{src:w.R.getSkuImageUrl(r),priority:!0,alt:"string"==typeof K?K:r.skuId,className:"self-start pb-9 sm:pb-0 sm:pr-8",width:160,height:150}),o?(t="mx-4",(0,a.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-start",children:[(0,a.jsx)(D(),{src:w.R.getSkuImageUrl(r),priority:!0,alt:"string"==typeof K?K:r.skuId,className:t,width:60,height:60}),(0,a.jsx)("div",{className:"flex min-w-0 flex-1 flex-col overflow-hidden",children:H?(0,a.jsx)("div",{className:"accordion flex flex-col items-start",children:(0,a.jsx)(k.s,{label:K,subLabel:(0,a.jsx)($,{sku:r}),extraContent:Y(),isAccordionOpen:R,toggleAccordion:function(){O(function(e){return!e}),setTimeout(function(){return window.dispatchEvent(new Event("resize"))},10)},horizontalAlign:"left"})}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-h6","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.SKU_NAME,children:K}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)($,{sku:r}),Y()]})]})})]}),H&&R&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{className:"w-full border-t"}),(0,a.jsxs)("div",{className:"px-0",children:[H,j&&L]})]}),!H&&j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{className:"w-full border-t"}),(0,a.jsx)("div",{className:"px-4 pt-4",children:L})]})]})):(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-1",children:[(0,a.jsxs)("div",{className:"text-h6 hidden flex-1 sm:block sm:pr-5","data-testid":"label-order-review-currency",children:[(0,a.jsx)("p",{"data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.SKU_NAME,children:K}),(0,a.jsxs)("div",{className:"mt-4",children:[H,j&&L]})]}),(0,a.jsx)($,{sku:r})]}),Y()]})]})]})},ee=s(70292),et=function(e){var t,s,n=e.item,r=e.isEmbeddedCheckoutMode,d=(0,l.$G)().t,o=(0,A.i)().isMobile,c=(0,i._)((0,m.useState)(!1),2),u=c[0],f=c[1],p=(0,V.s)().isRewardedSpendSupported,h=(0,W.l)().user,E=(0,X.AX)(),N=E.cleanUpPromoCode,R=E.promoCodeDetails,O=E.promoCodeState,j=(0,g.useRouter)().locale,C=(0,_.g)().skuDisplay,T=n.skuId!==U.j.GO_FEST_2025_TEST?null==C?void 0:C.displayRewardedSpendPoints(n,j||M.J.DEFAULT,function(){return f(!0)},!0):null,I=!!(null==n?void 0:null===(t=n.bundledCurrencyList)||void 0===t?void 0:t.at(0))&&!(null==n?void 0:null===(s=n.bundledItemList)||void 0===s?void 0:s.at(0)),y=null==R?void 0:R.bonusItem,S=null==R?void 0:R.code,P=null==C?void 0:C.displaySkuName(n),L=!I&&(null==C?void 0:C.displayBundledItems(n,h,void 0,function(){f(!0)})),k=(null==R?void 0:R.discount)&&S&&d("common.promo_code_percent_off",{code:S,percent:null==R?void 0:R.discount.percent.toString()}),B=y&&S&&(null==y?void 0:y.state)===v.F2.ITEM_STATE.PURCHASABLE&&(0,a.jsxs)(l.cC,{ns:"common",i18nKey:"order_review.promotion_detail",children:[S," applied",null==C?void 0:C.displaySkuName(R.bonusItem)]}),F=function(){var e,t;if(O===v.u3.XSOLLA_PROMOCODE_STATUS.VALID)return(null==R?void 0:null===(e=R.discount)||void 0===e?void 0:e.percent)?t=k:y&&(null==y?void 0:y.state)===v.F2.ITEM_STATE.PURCHASABLE&&(t=B),t&&(0,a.jsxs)("div",{className:"flex","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.PROMOTION_DETAIL_CONTAINER,children:[(0,a.jsx)("p",{children:t}),(0,a.jsx)("button",{className:"text-body pl-2 underline","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.PROMOTION_DETAIL_REMOVE_BUTTON,onClick:function(){N()},children:d("common.remove")})]})};return(0,a.jsxs)(a.Fragment,{children:[p&&u&&(0,a.jsx)(z.E,{onClose:function(){return f(!1)}}),r&&(0,a.jsx)("div",{className:(0,x.Z)("review-order",b.z.COMPONENT.REVIEW_ORDER_CARD.CONTENT_CONTAINER,"max-w-[800px]","flex flex-grow flex-col justify-between","rounded-3xl border px-7 py-14 sm:mt-12"),"data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.CONTENT_CONTAINER,children:o?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsxs)("div",{className:"flex  items-center pb-3",children:[(0,a.jsx)(D(),{src:w.R.getSkuImageUrl(n),priority:!0,className:"self-center",alt:"string"==typeof P?P:n.skuId,width:110,height:100}),!I&&(0,a.jsx)("div",{className:"text-h6","data-testid":"label-order-review-currency-mobile",children:(0,a.jsx)(ee.j,{label:P,testid:b.z.COMPONENT.REVIEW_ORDER_CARD.BUTTON_BUNDLE_CONTENTS_EXPAND_COLLAPSE,children:(0,a.jsxs)("div",{className:"mt-4",children:[L,p&&T]})})}),I&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"text-h6","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.SKU_NAME,children:P}),(0,a.jsxs)("div",{className:"mt-4",children:[L,p&&T]})]})]})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D(),{src:w.R.getSkuImageUrl(n),priority:!0,className:"self-center",alt:"string"==typeof P?P:n.skuId,width:280,height:280}),(0,a.jsx)("div",{className:"flex flex-1 flex-col justify-center",children:(0,a.jsx)("div",{className:"flex flex-col items-center pb-3",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-h5 text-center","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.SKU_NAME,children:P}),(0,a.jsxs)("div",{className:"mt-4",children:[L,p&&T]})]})})})]})}),!r&&(0,a.jsxs)("div",{className:(0,x.Z)("review-order",b.z.COMPONENT.REVIEW_ORDER_CARD.CONTENT_CONTAINER,"flex flex-col sm:flex-row sm:items-center sm:justify-center","max-w-[1056px] rounded-3xl border px-7 py-6 sm:mt-12","mx-auto mt-8"),"data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.CONTENT_CONTAINER,children:[(0,a.jsx)(D(),{src:w.R.getSkuImageUrl(n),priority:!0,alt:"string"==typeof P?P:n.skuId,className:"self-center pb-9 sm:pb-0 sm:pr-10",width:160,height:150}),o?(0,a.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center pb-3",children:[!I&&(0,a.jsx)("div",{className:"text-h6","data-testid":"label-order-review-currency-mobile",children:(0,a.jsx)(ee.j,{label:P,testid:b.z.COMPONENT.REVIEW_ORDER_CARD.BUTTON_BUNDLE_CONTENTS_EXPAND_COLLAPSE,forceOpen:n.skuId===U.j.GO_FEST_2025_TEST,children:(0,a.jsxs)("div",{className:"mt-4",children:[L,p&&T]})})}),I&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"text-h6","data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.SKU_NAME,children:P}),(0,a.jsxs)("div",{className:"mt-4",children:[L,p&&T]})]}),F()]}),(0,a.jsx)("hr",{className:"w-full border-t pb-6"}),(0,a.jsx)($,{sku:n})]}):(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-1",children:[(0,a.jsxs)("div",{className:"text-h6 hidden flex-1 sm:block sm:pr-5","data-testid":"label-order-review-currency",children:[(0,a.jsx)("p",{"data-ws-testid":b.z.COMPONENT.REVIEW_ORDER_CARD.SKU_NAME,children:P}),(0,a.jsxs)("div",{className:"mt-4",children:[L,p&&T]})]}),(0,a.jsx)($,{sku:n})]}),F()]})]})]})},es=s(99372),en=s(96530),ei=s(53941),er=s(55498),ea=s(7255),el=function(e){var t=e.useMultilineDisplay,s=void 0!==t&&t,n=e.noMultilineGap,i=void 0!==n&&n,r=e.splitPointsAndLabel,d=e.showLabelOnMultiline,o=void 0!==d&&d,c=(0,l.$G)().t,u=(0,W.l)().user,m=(0,g.useRouter)().locale,f=(0,er.u)().isUserFromJapan;if(!u)return null;var p=(0,ea.at)(u);if(!p)return null;var h=0,E=null==p?void 0:p.balance,N=null==p?void 0:p.fiatPurchasedBalance;f&&(h=p.balance-p.fiatPurchasedBalance);var v=(0,J.qn)(h,m),_=(0,J.qn)(E,m),w=(0,J.qn)(N,m);return f?s?(0,a.jsxs)("div",{className:(0,x.Z)("flex flex-col items-center justify-center",o?"flex-col":"flex-row",i?"":"gap-2","text-h6 text-center"),"data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.CONTAINER,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y.U,{}),(0,a.jsx)("p",{className:"header-points","data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.BALANCE_TOTAL,children:_})]}),(0,a.jsxs)(l.cC,{as:"p",ns:"common",i18nKey:"common.virtual_currency_quantity_japan",children:["",(0,a.jsxs)("span",{className:"text-caption header-points-label font-normal","data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.BALANCE_JP_SPLIT,children:["(",w," + ",v," Bonus VC)"]})]})]}):(0,a.jsxs)("div",{className:(0,x.Z)("flex items-center justify-center",o?"flex-col":"flex-row",i?"":"gap-2","text-h6 text-center"),"data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.CONTAINER,children:[(0,a.jsx)(Y.U,{}),(0,a.jsxs)(l.cC,{as:"p",ns:"common",i18nKey:"common.virtual_currency_quantity_japan",children:[(0,a.jsx)("span",{className:"header-points","data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.BALANCE_TOTAL,children:_}),(0,a.jsxs)("span",{className:"text-caption header-points-label font-normal","data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.BALANCE_JP_SPLIT,children:["(",w," + ",v," Bonus VC)"]})]})]}):s?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-0 text-center",children:[(0,a.jsxs)("div",{className:"text-h6 flex items-center gap-2","data-testid":"label-user-snapshot-currency-balance","data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.CONTAINER,children:[(0,a.jsx)(Y.U,{}),(0,a.jsx)("p",{"data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.BALANCE_TOTAL,children:_})]}),o&&(0,a.jsx)("span",{className:"header-points-label","data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.BALANCE_LABEL_MOBILE_SPLIT,children:c("common.virtual_currency_name")})]}):(0,a.jsxs)("div",{className:"text-h6 flex items-center gap-2","data-testid":"label-user-snapshot-currency-balance","data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.CONTAINER,children:[(0,a.jsx)(Y.U,{}),(0,a.jsx)("p",{"data-ws-testid":b.z.COMPONENT.VIRTUAL_CURRENCY_BALANCE.BALANCE_TOTAL,children:void 0!==r&&r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"header-points",children:_}),(0,a.jsx)("span",{className:"header-points-label ml-2",children:c("common.virtual_currency_name")})]}):(0,a.jsx)("span",{children:c("common.virtual_currency_quantity",{amount:_})})})]})},ed=function(e){(0,ei._)(e);var t,s,n,i,r,d,o,c=(0,W.l)().user,u=(0,g.useRouter)().locale,m=(0,R.q)().common,f=(0,A.i)(),p=f.width,h=f.isMobile,E=(0,l.$G)().t;if(!c||!p)return null;var N=null==c?void 0:null===(s=c.playerInfo)||void 0===s?void 0:null===(t=s.level)||void 0===t?void 0:t.toLocaleString(u),v=null==c?void 0:null===(n=c.playerInfo)||void 0===n?void 0:n.team,_=(0,a.jsx)("div",{className:"user-snapshot__property-divider h-[12px] border-r"});return(0,a.jsxs)("div",{className:(0,x.Z)("user-snapshot"),"data-ws-testid":b.z.COMPONENT.USER_SNAPSHOT.CONTAINER,children:[(0,a.jsx)("h5",{className:(0,x.Z)("user-snapshot__username","mb-3 text-center sm:mb-1 sm:text-left"),"data-testid":"label-user-snapshot-name","data-ws-testid":b.z.COMPONENT.USER_SNAPSHOT.USERNAME,children:null==c?void 0:null===(i=c.playerInfo)||void 0===i?void 0:i.displayName}),(null==m?void 0:null===(r=m.userConfig)||void 0===r?void 0:r.displayNianticId)&&!!(null===(d=c.playerInfo)||void 0===d?void 0:d.nianticId)&&(0,a.jsx)("h6",{className:"text-center sm:mb-1 sm:text-left",children:"Niantic ID: ".concat(null===(o=c.playerInfo)||void 0===o?void 0:o.nianticId)}),(0,a.jsxs)("div",{className:(0,x.Z)("flex flex-row items-center justify-center gap-2 sm:justify-start"),children:[(0,a.jsx)("p",{className:"text-h6 pr-1","data-testid":"label-user-snapshot-level","data-ws-testid":b.z.COMPONENT.USER_SNAPSHOT.LEVEL,children:E("common.level",{level:N})}),v&&(0,a.jsxs)(a.Fragment,{children:[_,(0,a.jsx)("p",{className:"text-h6 pr-1","data-testid":"label-user-snapshot-team","data-ws-testid":b.z.COMPONENT.USER_SNAPSHOT.TEAM,children:E(v)})]}),!h&&_,!h&&(0,a.jsx)(el,{})]}),(0,a.jsx)("div",{children:h&&(0,a.jsx)(el,{useMultilineDisplay:!0})})]})},eo=s(14201),ec=s(74395),eu=o()(function(){return s.e(16280).then(s.bind(s,16280)).then(function(e){return e.PromoCodeInputField})},{loadableGenerated:{webpack:function(){return[16280]}},ssr:!1}),em=o()(function(){return s.e(79433).then(s.bind(s,79433)).then(function(e){return e.PromoCodeInputField_DEPR})},{loadableGenerated:{webpack:function(){return[79433]}},ssr:!1}),ef=!0,ex=function(e){var t,s,d,o,c,C,T,g,I,S,P,L,D,k,M,U,z,V,B,F,G,K,H,J,Y,q,$,ee,ei,ea,el,ef,ex,ep,eh,eE=e.item,eN=e.country,ev=e.reviewOrderConfig,e_=e.rewardedSpendMonthlyEndTime,ew=e.fastSpringSecureKey,eR=e.fastSpringSecurePayload,eO=(0,l.$G)().t,ej=(0,W.l)(),eC=ej.user,eT=ej.isLoadingUser,eA=(0,R.q)(),eg=eA.common,eb=eA.envSpecific,eI=(0,i._)((0,m.useState)(!1),2),ey=eI[0],eS=eI[1],eP=(0,es.K)({setIsRedirecting:eS}),eL=eP.loading,eD=eP.handleOrderConfirm,ek=(0,X.AX)().purchaseCoinSku,eM=(0,p.kY)().mutate,eU=(0,eo.V)({shouldRedirectHome:!1}).signInUrl,ez=(0,er.u)().showJPComplianceLinks,eV=(0,i._)((0,m.useState)(!1),2),eW=eV[0],eB=eV[1],eF=(0,_.g)().skuDisplay,eG=(0,ec.l)(v.u3.PAYMENT_VENDOR.SBPS,eb),eK=(0,ec.l)(v.u3.PAYMENT_VENDOR.FASTSPRING,eb),eH=w.R.isCoinPricedSku(eE),eZ=(0,m.useRef)(null),eJ=(0,m.useRef)(null),eY=(0,A.i)(),eq=eY.isMobile,eX=eY.isTablet,e$=eq||eX,eQ=null==eg?void 0:null===(d=eg.pageConfig)||void 0===d?void 0:d.enableOrderReviewRevamp,e0=(null==eg?void 0:null===(o=eg.pageConfig)||void 0===o?void 0:o.enableWebfusionFooter)&&!0,e2=(0,m.useCallback)(function(){var e=document.querySelector("footer"),t=eZ.current;if(e&&t){var s=e.getBoundingClientRect();if(s.top<window.innerHeight){t.style.position="absolute",t.style.bottom="auto";var n=document.documentElement.scrollHeight,i=s.height,r=t.offsetHeight;t.style.top="".concat(n-i-r,"px"),t.classList.add(e0?"with-footer-wf":"with-footer")}else t.style.position="fixed",t.style.bottom="0",t.style.top="auto",t.classList.remove(e0?"with-footer-wf":"with-footer")}},[e0]);(0,m.useEffect)(function(){var e,t=document.querySelector("footer"),s=eZ.current,n=eJ.current;if(t&&s){var i=!1,r=function(){i||(i=!0,requestAnimationFrame(function(){e2(),i=!1}))};window.addEventListener("scroll",r),window.addEventListener("resize",r);var a=new IntersectionObserver(r,{root:null,threshold:0});return a.observe(t),n&&(e=new MutationObserver(function(){setTimeout(r,10)})).observe(n,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),function(){window.removeEventListener("scroll",r),window.removeEventListener("resize",r),a.disconnect(),e&&e.disconnect()}}},[e2]);var e1=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u(),{children:[(0,a.jsx)("title",{children:eO("page_title.review_order")}),(0,a.jsx)("meta",{name:"og:title",content:"".concat(null==eF?void 0:eF.displaySkuName(eE)," -- ").concat(eO("page_title.review_order")," ")}),(0,a.jsx)("meta",{name:"og:image",content:w.R.getSkuImageUrl(eE)})]}),(0,a.jsx)("div",{className:(0,x.Z)(E.T.MAX_WIDTH,"mx-auto mt-2 pl-2"),children:(0,a.jsx)(O.I,{})}),eC&&(0,a.jsx)("section",{className:"flex w-full justify-center pt-4 sm:pt-9",children:eQ?(0,a.jsx)(en.u,{}):(0,a.jsx)(ed,{})})]})};if(ey)return(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsx)(j.v,{})});if(eE.state===v.F2.STATE.PURCHASABLE&&eK&&eC&&!eH)return(0,a.jsx)(y,{children:(0,a.jsx)(Z,{item:eE,rewardedSpendMonthlyEndTime:e_,fastSpringSecureKey:ew,fastSpringSecurePayload:eR,headerWithUserSnapshot:e1()})});var e6=eW||!eG,e4=(null===(g=ev.countryReviewOrderLinksMap)||void 0===g?void 0:null===(T=g.filter(function(e){return e[0]===eN})[0])||void 0===T?void 0:null===(C=T[1])||void 0===C?void 0:null===(c=C.helpshiftLink)||void 0===c?void 0:c.url)||(null===(S=ev.defaultReviewOrderLinks)||void 0===S?void 0:null===(I=S.helpshiftLink)||void 0===I?void 0:I.url),e3=(null===(k=ev.countryReviewOrderLinksMap)||void 0===k?void 0:null===(D=k.filter(function(e){return e[0]===eN})[0])||void 0===D?void 0:null===(L=D[1])||void 0===L?void 0:null===(P=L.nianticTermsLink)||void 0===P?void 0:P.url)||(null===(U=ev.defaultReviewOrderLinks)||void 0===U?void 0:null===(M=U.nianticTermsLink)||void 0===M?void 0:M.url),e5=(null===(F=ev.countryReviewOrderLinksMap)||void 0===F?void 0:null===(B=F.filter(function(e){return e[0]===eN})[0])||void 0===B?void 0:null===(V=B[1])||void 0===V?void 0:null===(z=V.nianticPrivacyPolicyLink)||void 0===z?void 0:z.url)||(null===(K=ev.defaultReviewOrderLinks)||void 0===K?void 0:null===(G=K.nianticPrivacyPolicyLink)||void 0===G?void 0:G.url),e8=null==eF?void 0:eF.displayInvalidPurchase(eE,eC,e4),e7=null==eg?void 0:null===(H=eg.pageConfig)||void 0===H?void 0:H.enablePromocode,e9=function(){return eH?eO("common.buy_with_coins"):eO("order_review.proceed_to_payment")},te=(t=(0,n._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:return eS(!0),[4,ek(null==eF?void 0:eF.displaySkuName(eE))];case 1:return e.sent(),eM("WebstoreGetUserApi"),[2]}})}),function(){return t.apply(this,arguments)}),tt=(s=(0,n._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:if(!eH)return[3,2];return[4,te()];case 1:return e.sent(),[3,3];case 2:eD(null==eF?void 0:eF.displaySkuName(eE)),e.label=3;case 3:return[2]}})}),function(){return s.apply(this,arguments)}),ts=function(){var e=eL||(null==eE?void 0:eE.state)!==v.F2.ITEM_STATE.PURCHASABLE||!e6||!!e8;return eQ?(0,a.jsxs)(h.AN,{"data-ga-on":"click","data-ga-event-action":"click","data-ga-event-category":"Internal Link","data-ga-event-label":"Proceed To Payment",onClick:(0,n._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:return[4,tt()];case 1:return e.sent(),[2]}})}),level:"primary",disabled:e,className:(0,x.Z)("hydrated","w-full max-w-[300px] sm:w-auto","min-w-[120px] xs:min-w-[140px] lg:min-w-[152px]",e6?"active-review-order-anchor-button":"cursor-not-allowed opacity-50"),"data-testid":"button-order-review-proceed-to-payment","data-ws-testid":b.z.PAGE.REVIEW_ORDER.BUTTON_PROCEED_TO_PAYMENT,children:[(null==eE?void 0:eE.state)!==v.F2.ITEM_STATE.PURCHASABLE&&(0,a.jsx)("div",{className:(0,x.Z)(e$?"mr-[6px] h-[16px] w-[16px]":"mr-[8px] h-[20px] w-[20px]"),children:(0,a.jsx)(f.g,{iconName:"lock",size:e$?"16":"20","data-testid":"icon-order-review-button-locked","data-ws-testid":b.z.PAGE.REVIEW_ORDER.PROCEED_TO_PAYMENT_ICON})}),e9()]}):(0,a.jsx)("div",{className:"px-1",children:(0,a.jsx)(h.AN,{"data-ga-on":"click","data-ga-event-action":"click","data-ga-event-category":"Internal Link","data-ga-event-label":"Proceed To Payment",onClick:(0,n._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:return[4,tt()];case 1:return e.sent(),[2]}})}),level:"primary",disabled:e,className:(0,x.Z)("hydrated w-max min-w-[120px] xs:min-w-[140px] lg:min-w-[152px]",e6?"active-review-order-anchor-button":"cursor-not-allowed opacity-50"),"data-testid":"button-order-review-proceed-to-payment","data-ws-testid":b.z.PAGE.REVIEW_ORDER.BUTTON_PROCEED_TO_PAYMENT,children:e9()})})},tn=function(){return eT?(0,a.jsx)(h.AN,{class:"hydrated",level:"primary",disabled:!0,"data-ws-testid":b.z.PAGE.REVIEW_ORDER.SIGN_IN_BUTTON,children:eO("order_review.sign_in_to_purchase")}):eQ?(0,a.jsx)(h.AN,{level:"primary",role:"link",disabled:!e6,className:(0,x.Z)("hydrated","w-full max-w-[300px] sm:w-auto","min-w-[120px] xs:min-w-[140px] lg:min-w-[152px]",e6?"active-review-order-anchor-button":"cursor-not-allowed opacity-50"),"data-testid":"link-headerdesktop-signin","data-ws-testid":b.z.PAGE.REVIEW_ORDER.SIGN_IN_LINK,onClick:function(){eU&&(window.location.href=eU)},children:eO("order_review.sign_in_to_purchase")}):(0,a.jsx)(h.AN,{className:"hydrated w-max min-w-[120px] xs:min-w-[140px] lg:min-w-[152px] ".concat(e6?"active-review-order-anchor-button":"cursor-not-allowed opacity-50"),level:"primary",disabled:!e6,"data-ws-testid":b.z.PAGE.REVIEW_ORDER.SIGN_IN_BUTTON,children:eU&&(0,a.jsx)("a",{href:eU,className:"anchor-button-link","data-testid":"link-headerdesktop-signin","data-ws-testid":b.z.PAGE.REVIEW_ORDER.SIGN_IN_LINK,children:eO("order_review.sign_in_to_purchase")})})},ti=e0?"pb-28":"pb-20";return eQ?(0,a.jsxs)(a.Fragment,{children:[e1(),(0,a.jsxs)("div",{ref:eJ,className:(0,x.Z)(ez?ti:"pb-12",!eC&&ti,!eG&&ti),children:[(0,a.jsxs)("section",{className:"px-5 sm:px-20","data-testid":"container-order-review-snapshot-parent","data-ws-testid":b.z.PAGE.REVIEW_ORDER.REVIEW_ORDER_CARD_CONTAINER,children:[(0,a.jsx)(Q,{item:eE,rewardedSpendMonthlyEndTime:e_}),eC&&!!e8&&(0,a.jsx)("div",{className:"mt-5 text-center","data-ws-testid":b.z.PAGE.REVIEW_ORDER.INVALID_PURCHASE_MESSAGE,children:e8}),eC&&e7&&!e8&&!eH&&(0,a.jsx)("div",{"data-ws-testid":b.z.PAGE.REVIEW_ORDER.PROMOCODE_CONTAINER,className:"mx-auto flex w-[80%] flex-col items-center justify-center sm:w-[520px]",children:(0,a.jsx)(eu,{item:eE})})]}),eC&&eG&&(0,a.jsxs)("div",{className:"mx-auto mt-3 flex max-w-[300px] items-start justify-start sm:mx-5 sm:mt-8 sm:max-w-none sm:justify-center","data-ws-testid":b.z.PAGE.REVIEW_ORDER.SBPS_CONTAINER,children:[(0,a.jsx)("input",{type:"checkbox",checked:eW,onChange:function(){return eB(function(e){return!e})},"data-testid":"checkbox-order-review-terms-agreement","data-ws-testid":b.z.PAGE.REVIEW_ORDER.CHECKBOX_TERMS_AGREEMENT,className:"mt-[3px]"}),(0,a.jsxs)("div",{className:"ml-2 flex flex-col",children:[e3&&e5&&(0,a.jsx)("p",{className:"text-brown-20 text-sm","data-testid":"label-order-review-terms-accepted-msg","data-ws-testid":b.z.PAGE.REVIEW_ORDER.LABEL_TERMS_ACCEPTED_MSG,children:(0,a.jsxs)(l.cC,{i18nKey:"sbps_review.terms_of_service",children:["By proceeding, I confirm I am an adult and agree to ",(0,a.jsx)("a",{href:e3,className:"underline underline-offset-4",children:"Niantic's Terms of Service"})," and ",(0,a.jsx)("a",{href:e5,className:"underline underline-offset-4",children:"Privacy Policy"}),"."]})}),(0,a.jsx)("p",{className:"text-red-error mb-6 mt-2 text-sm ".concat(eW?"invisible":"visible"),"data-testid":"label-order-review-terms-accepted-error","data-ws-testid":b.z.PAGE.REVIEW_ORDER.LABEL_TERMS_ACCEPTED_ERROR,children:eO("sbps.checkbox_error")})]})]}),ez&&(0,a.jsx)("section",{className:"sm:mb-10","data-ws-testid":b.z.PAGE.REVIEW_ORDER.JP_COMPLIANCE_LINK_CONTAINER,children:(0,a.jsx)("ul",{className:"flex items-center justify-center gap-3 text-sm",children:null==eg?void 0:null===(ei=eg.footerConfig)||void 0===ei?void 0:null===(ee=ei.countryFooterLinksMap)||void 0===ee?void 0:null===($=ee.filter(function(e){return e[0]===N.t.JAPAN}))||void 0===$?void 0:null===(q=$[0])||void 0===q?void 0:null===(Y=q[1])||void 0===Y?void 0:null===(J=Y.complianceLinksList)||void 0===J?void 0:J.map(function(e){return(0,a.jsx)("li",{"data-ws-testid":b.z.PAGE.REVIEW_ORDER.JP_COMPLIANCE_LINK,children:(0,a.jsx)("a",{href:e.url,className:"underline underline-offset-4",children:eO(e.labelKey)})},e.labelKey)})})})]}),(0,a.jsx)("div",{ref:eZ,className:"sticky-purchase-button-container",children:(0,a.jsx)("div",{className:"sticky-purchase-button-wrapper",children:eC?ts():tn()})})]}):(0,a.jsxs)(a.Fragment,{children:[e1(),(0,a.jsxs)("section",{className:"min-h-[339px] px-5 sm:min-h-[170px] sm:px-20","data-testid":"container-order-review-snapshot-parent","data-ws-testid":b.z.PAGE.REVIEW_ORDER.REVIEW_ORDER_CARD_CONTAINER,children:[(0,a.jsx)(et,{item:eE,rewardedSpendMonthlyEndTime:e_}),eC&&!!e8&&(0,a.jsx)("p",{className:"mt-5 text-center","data-ws-testid":b.z.PAGE.REVIEW_ORDER.INVALID_PURCHASE_MESSAGE,children:e8}),eC&&e7&&!e8&&!eH&&(0,a.jsx)("div",{"data-ws-testid":b.z.PAGE.REVIEW_ORDER.PROMOCODE_CONTAINER,className:"mx-auto mt-12 flex w-[80%] flex-col items-center justify-center sm:w-[520px]",children:(0,a.jsx)(em,{item:eE})})]}),eC&&eG&&(0,a.jsxs)("div",{className:"mx-5 flex flex-col items-center justify-center","data-ws-testid":b.z.PAGE.REVIEW_ORDER.SBPS_CONTAINER,children:[(0,a.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:eW,onChange:function(){return eB(function(e){return!e})},"data-testid":"checkbox-order-review-terms-agreement","data-ws-testid":b.z.PAGE.REVIEW_ORDER.CHECKBOX_TERMS_AGREEMENT}),e3&&e5&&(0,a.jsx)("p",{className:"text-brown-20 ml-2 text-sm","data-testid":"label-order-review-terms-accepted-msg","data-ws-testid":b.z.PAGE.REVIEW_ORDER.LABEL_TERMS_ACCEPTED_MSG,children:(0,a.jsxs)(l.cC,{i18nKey:"sbps_review.terms_of_service",children:["By proceeding, I confirm I am an adult and agree to ",(0,a.jsx)("a",{href:e3,className:"underline underline-offset-4",children:"Niantic's Terms of Service"})," and ",(0,a.jsx)("a",{href:e5,className:"underline underline-offset-4",children:"Privacy Policy"}),"."]})})]}),!eW&&(0,a.jsx)("p",{className:"text-red-error mt-2 text-sm","data-testid":"label-order-review-terms-accepted-error","data-ws-testid":b.z.PAGE.REVIEW_ORDER.LABEL_TERMS_ACCEPTED_ERROR,children:eO("sbps.checkbox_error")})]}),ez&&(0,a.jsx)("section",{"data-ws-testid":b.z.PAGE.REVIEW_ORDER.JP_COMPLIANCE_LINK_CONTAINER,children:(0,a.jsx)("ul",{className:"mt-4 flex items-center justify-center gap-3 text-sm sm:mt-8",children:null==eg?void 0:null===(eh=eg.footerConfig)||void 0===eh?void 0:null===(ep=eh.countryFooterLinksMap)||void 0===ep?void 0:null===(ex=ep.filter(function(e){return e[0]===N.t.JAPAN}))||void 0===ex?void 0:null===(ef=ex[0])||void 0===ef?void 0:null===(el=ef[1])||void 0===el?void 0:null===(ea=el.complianceLinksList)||void 0===ea?void 0:ea.map(function(e){return(0,a.jsx)("li",{"data-ws-testid":b.z.PAGE.REVIEW_ORDER.JP_COMPLIANCE_LINK,children:(0,a.jsx)("a",{href:e.url,className:"underline underline-offset-4",children:eO(e.labelKey)})},e.labelKey)})})}),(0,a.jsx)("section",{className:"text-button mb-6 mt-6 flex flex-row justify-center sm:mt-12",children:eC?ts():tn()})]})}},74466:function(e,t,s){"use strict";s.d(t,{H:function(){return r}});var n=s(69754),i=s(6220),r=function(e,t,s,r){var a,l=null,d=null==t?void 0:null===(a=t.discount)||void 0===a?void 0:a.percent;return e?(e.priceMetaData&&e.priceMetaData.originalPriceE6!==e.priceE6?l=e.priceMetaData.originalPriceE6:d&&s===i.u3.XSOLLA_PROMOCODE_STATUS.VALID&&(l=e.priceE6),null!==l?(0,n.hE)(e.currency,l,r):null):null}}},function(e){e.O(0,[35099,46309,82909,2260,63432,88094,92888,49774,40179],function(){return e(e.s=54623)}),_N_E=e.O()}]);